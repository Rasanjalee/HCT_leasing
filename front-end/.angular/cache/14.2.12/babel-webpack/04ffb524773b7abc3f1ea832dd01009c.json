{"ast":null,"code":"import { Observable } from 'rxjs';\nimport { Injectable, NgModule, Component, ViewChild, Renderer, Input, Output, EventEmitter, ChangeDetectorRef, forwardRef, HostListener, defineInjectable, inject } from '@angular/core';\nimport { HttpClient, HttpRequest, HttpEventType, HttpResponse, HttpHeaders, HttpClientModule } from '@angular/common/http';\nimport { NG_VALUE_ACCESSOR } from '@angular/forms';\nimport Cropper from 'cropperjs';\nimport { CommonModule } from '@angular/common';\n/**\r\n * @fileoverview added by tsickle\r\n * @suppress {checkTypes} checked by tsc\r\n */\n\n/** @enum {number} */\n\nimport * as ɵngcc0 from '@angular/core';\nimport * as ɵngcc1 from '@angular/common/http';\nimport * as ɵngcc2 from '@angular/common';\nconst _c0 = [\"imageElement\"];\nconst _c1 = [\"fileInput\"];\nconst _c2 = [\"dragOverlay\"];\n\nfunction ImageUploaderComponent_div_2_Template(rf, ctx) {\n  if (rf & 1) {\n    const _r9 = ɵngcc0.ɵɵgetCurrentView();\n\n    ɵngcc0.ɵɵelementStart(0, \"div\", 9)(1, \"button\", 10);\n    ɵngcc0.ɵɵlistener(\"click\", function ImageUploaderComponent_div_2_Template_button_click_1_listener() {\n      ɵngcc0.ɵɵrestoreView(_r9);\n      const ctx_r8 = ɵngcc0.ɵɵnextContext();\n      return ɵngcc0.ɵɵresetView(ctx_r8.onImageClicked());\n    });\n    ɵngcc0.ɵɵelementStart(2, \"div\")(3, \"p\", 11);\n    ɵngcc0.ɵɵtext(4, \"+\");\n    ɵngcc0.ɵɵelementEnd();\n    ɵngcc0.ɵɵelementStart(5, \"p\");\n    ɵngcc0.ɵɵtext(6, \"Click here to add image\");\n    ɵngcc0.ɵɵelementEnd();\n    ɵngcc0.ɵɵelementStart(7, \"p\");\n    ɵngcc0.ɵɵtext(8, \"Or drop image here\");\n    ɵngcc0.ɵɵelementEnd()()()();\n  }\n}\n\nfunction ImageUploaderComponent_div_3_Template(rf, ctx) {\n  if (rf & 1) {\n    const _r12 = ɵngcc0.ɵɵgetCurrentView();\n\n    ɵngcc0.ɵɵelementStart(0, \"div\", 12);\n    ɵngcc0.ɵɵelement(1, \"img\", 13, 14);\n    ɵngcc0.ɵɵelementStart(3, \"button\", 15);\n    ɵngcc0.ɵɵlistener(\"click\", function ImageUploaderComponent_div_3_Template_button_click_3_listener() {\n      ɵngcc0.ɵɵrestoreView(_r12);\n      const ctx_r11 = ɵngcc0.ɵɵnextContext();\n      return ɵngcc0.ɵɵresetView(ctx_r11.removeImage());\n    });\n    ɵngcc0.ɵɵtext(4, \"\\u00D7\");\n    ɵngcc0.ɵɵelementEnd()();\n  }\n\n  if (rf & 2) {\n    const ctx_r1 = ɵngcc0.ɵɵnextContext();\n    ɵngcc0.ɵɵadvance(1);\n    ɵngcc0.ɵɵproperty(\"src\", ctx_r1.imageThumbnail, ɵngcc0.ɵɵsanitizeUrl);\n  }\n}\n\nfunction ImageUploaderComponent_div_4_Template(rf, ctx) {\n  if (rf & 1) {\n    const _r15 = ɵngcc0.ɵɵgetCurrentView();\n\n    ɵngcc0.ɵɵelementStart(0, \"div\", 12);\n    ɵngcc0.ɵɵelement(1, \"img\", 13, 14);\n    ɵngcc0.ɵɵelementStart(3, \"button\", 15);\n    ɵngcc0.ɵɵlistener(\"click\", function ImageUploaderComponent_div_4_Template_button_click_3_listener() {\n      ɵngcc0.ɵɵrestoreView(_r15);\n      const ctx_r14 = ɵngcc0.ɵɵnextContext();\n      return ɵngcc0.ɵɵresetView(ctx_r14.removeImage());\n    });\n    ɵngcc0.ɵɵtext(4, \"\\u00D7\");\n    ɵngcc0.ɵɵelementEnd()();\n  }\n\n  if (rf & 2) {\n    const ctx_r2 = ɵngcc0.ɵɵnextContext();\n    ɵngcc0.ɵɵadvance(1);\n    ɵngcc0.ɵɵproperty(\"src\", ctx_r2.imageThumbnail, ɵngcc0.ɵɵsanitizeUrl);\n  }\n}\n\nfunction ImageUploaderComponent_div_5_Template(rf, ctx) {\n  if (rf & 1) {\n    const _r17 = ɵngcc0.ɵɵgetCurrentView();\n\n    ɵngcc0.ɵɵelementStart(0, \"div\")(1, \"img\", 16);\n    ɵngcc0.ɵɵlistener(\"click\", function ImageUploaderComponent_div_5_Template_img_click_1_listener() {\n      ɵngcc0.ɵɵrestoreView(_r17);\n      const ctx_r16 = ɵngcc0.ɵɵnextContext();\n      return ɵngcc0.ɵɵresetView(ctx_r16.onImageClicked());\n    });\n    ɵngcc0.ɵɵelementEnd();\n    ɵngcc0.ɵɵelementStart(2, \"div\", 17);\n    ɵngcc0.ɵɵelement(3, \"div\", 18);\n    ɵngcc0.ɵɵelementEnd()();\n  }\n\n  if (rf & 2) {\n    const ctx_r3 = ɵngcc0.ɵɵnextContext();\n    ɵngcc0.ɵɵadvance(1);\n    ɵngcc0.ɵɵattribute(\"src\", ctx_r3.imageThumbnail ? ctx_r3.imageThumbnail : null, ɵngcc0.ɵɵsanitizeUrl);\n    ɵngcc0.ɵɵadvance(2);\n    ɵngcc0.ɵɵstyleProp(\"width\", ctx_r3.progress + \"%\");\n  }\n}\n\nfunction ImageUploaderComponent_div_6_Template(rf, ctx) {\n  if (rf & 1) {\n    ɵngcc0.ɵɵelementStart(0, \"div\", 9)(1, \"div\", 19);\n    ɵngcc0.ɵɵelement(2, \"div\", 20)(3, \"div\", 21)(4, \"div\", 22)(5, \"div\", 23)(6, \"div\", 24)(7, \"div\", 25)(8, \"div\", 26)(9, \"div\", 27)(10, \"div\", 28)(11, \"div\", 29)(12, \"div\", 30)(13, \"div\", 31);\n    ɵngcc0.ɵɵelementEnd()();\n  }\n}\n\nfunction ImageUploaderComponent_div_7_Template(rf, ctx) {\n  if (rf & 1) {\n    const _r19 = ɵngcc0.ɵɵgetCurrentView();\n\n    ɵngcc0.ɵɵelementStart(0, \"div\", 9)(1, \"div\", 32)(2, \"div\", 33)(3, \"p\");\n    ɵngcc0.ɵɵtext(4);\n    ɵngcc0.ɵɵelementEnd()();\n    ɵngcc0.ɵɵelementStart(5, \"button\", 15);\n    ɵngcc0.ɵɵlistener(\"click\", function ImageUploaderComponent_div_7_Template_button_click_5_listener() {\n      ɵngcc0.ɵɵrestoreView(_r19);\n      const ctx_r18 = ɵngcc0.ɵɵnextContext();\n      return ɵngcc0.ɵɵresetView(ctx_r18.dismissError());\n    });\n    ɵngcc0.ɵɵtext(6, \"\\u00D7\");\n    ɵngcc0.ɵɵelementEnd()()();\n  }\n\n  if (rf & 2) {\n    const ctx_r5 = ɵngcc0.ɵɵnextContext();\n    ɵngcc0.ɵɵadvance(4);\n    ɵngcc0.ɵɵtextInterpolate(ctx_r5.errorMessage);\n  }\n}\n\nconst FileQueueStatus = {\n  Pending: 0,\n  Success: 1,\n  Error: 2,\n  Progress: 3\n};\nFileQueueStatus[FileQueueStatus.Pending] = \"Pending\";\nFileQueueStatus[FileQueueStatus.Success] = \"Success\";\nFileQueueStatus[FileQueueStatus.Error] = \"Error\";\nFileQueueStatus[FileQueueStatus.Progress] = \"Progress\";\n/**\r\n * @fileoverview added by tsickle\r\n * @suppress {checkTypes} checked by tsc\r\n */\n\nclass FileQueueObject {\n  /**\r\n   * @param {?} file\r\n   */\n  constructor(file) {\n    this.status = FileQueueStatus.Pending;\n    this.progress = 0;\n    this.request = null;\n    this.response = null;\n\n    this.isPending = () => this.status === FileQueueStatus.Pending;\n\n    this.isSuccess = () => this.status === FileQueueStatus.Success;\n\n    this.isError = () => this.status === FileQueueStatus.Error;\n\n    this.inProgress = () => this.status === FileQueueStatus.Progress;\n\n    this.isUploadable = () => this.status === FileQueueStatus.Pending || this.status === FileQueueStatus.Error;\n\n    this.file = file;\n  }\n\n}\n/**\r\n * @fileoverview added by tsickle\r\n * @suppress {checkTypes} checked by tsc\r\n */\n\n\nclass ImageUploaderService {\n  /**\r\n   * @param {?} http\r\n   */\n  constructor(http) {\n    this.http = http;\n  }\n  /**\r\n   * @param {?} file\r\n   * @param {?} options\r\n   * @param {?=} cropOptions\r\n   * @return {?}\r\n   */\n\n\n  uploadFile(file, options, cropOptions) {\n    this.setDefaults(options);\n    const\n    /** @type {?} */\n    form = new FormData();\n    form.append(options.fieldName, file, file.name);\n\n    if (cropOptions) {\n      form.append('X', cropOptions.x.toString());\n      form.append('Y', cropOptions.y.toString());\n      form.append('Width', cropOptions.width.toString());\n      form.append('Height', cropOptions.height.toString());\n    } // upload file and report progress\n\n\n    const\n    /** @type {?} */\n    req = new HttpRequest('POST', options.uploadUrl, form, {\n      reportProgress: true,\n      withCredentials: options.withCredentials,\n      headers: this._buildHeaders(options)\n    });\n    return Observable.create(obs => {\n      const\n      /** @type {?} */\n      queueObj = new FileQueueObject(file);\n      queueObj.request = this.http.request(req).subscribe(event => {\n        if (event.type === HttpEventType.UploadProgress) {\n          this._uploadProgress(queueObj, event);\n\n          obs.next(queueObj);\n        } else if (event instanceof HttpResponse) {\n          this._uploadComplete(queueObj, event);\n\n          obs.next(queueObj);\n          obs.complete();\n        }\n      }, err => {\n        if (err.error instanceof Error) {\n          // A client-side or network error occurred. Handle it accordingly.\n          this._uploadFailed(queueObj, err);\n\n          obs.next(queueObj);\n          obs.complete();\n        } else {\n          // The backend returned an unsuccessful response code.\n          this._uploadFailed(queueObj, err);\n\n          obs.next(queueObj);\n          obs.complete();\n        }\n      });\n    });\n  }\n  /**\r\n   * @param {?} url\r\n   * @param {?} options\r\n   * @return {?}\r\n   */\n\n\n  getFile(url, options) {\n    return Observable.create(observer => {\n      let\n      /** @type {?} */\n      headers = new HttpHeaders();\n\n      if (options.authToken) {\n        headers = headers.append('Authorization', `${options.authTokenPrefix} ${options.authToken}`);\n      }\n\n      this.http.get(url, {\n        responseType: 'blob',\n        headers: headers\n      }).subscribe(res => {\n        const\n        /** @type {?} */\n        file = new File([res], 'filename', {\n          type: res.type\n        });\n        observer.next(file);\n        observer.complete();\n      }, err => {\n        observer.error(err.status);\n        observer.complete();\n      });\n    });\n  }\n  /**\r\n   * @param {?} options\r\n   * @return {?}\r\n   */\n\n\n  _buildHeaders(options) {\n    let\n    /** @type {?} */\n    headers = new HttpHeaders();\n\n    if (options.authToken) {\n      headers = headers.append('Authorization', `${options.authTokenPrefix} ${options.authToken}`);\n    }\n\n    if (options.customHeaders) {\n      Object.keys(options.customHeaders).forEach(key => {\n        headers = headers.append(key, options.customHeaders[key]);\n      });\n    }\n\n    return headers;\n  }\n  /**\r\n   * @param {?} queueObj\r\n   * @param {?} event\r\n   * @return {?}\r\n   */\n\n\n  _uploadProgress(queueObj, event) {\n    // update the FileQueueObject with the current progress\n    const\n    /** @type {?} */\n    progress = Math.round(100 * event.loaded / event.total);\n    queueObj.progress = progress;\n    queueObj.status = FileQueueStatus.Progress; // this._queue.next(this._files);\n  }\n  /**\r\n   * @param {?} queueObj\r\n   * @param {?} response\r\n   * @return {?}\r\n   */\n\n\n  _uploadComplete(queueObj, response) {\n    // update the FileQueueObject as completed\n    queueObj.progress = 100;\n    queueObj.status = FileQueueStatus.Success;\n    queueObj.response = response; // this._queue.next(this._files);\n    // this.onCompleteItem(queueObj, response.body);\n  }\n  /**\r\n   * @param {?} queueObj\r\n   * @param {?} response\r\n   * @return {?}\r\n   */\n\n\n  _uploadFailed(queueObj, response) {\n    // update the FileQueueObject as errored\n    queueObj.progress = 0;\n    queueObj.status = FileQueueStatus.Error;\n    queueObj.response = response; // this._queue.next(this._files);\n  }\n  /**\r\n   * @param {?} options\r\n   * @return {?}\r\n   */\n\n\n  setDefaults(options) {\n    options.withCredentials = options.withCredentials || false;\n    options.httpMethod = options.httpMethod || 'POST';\n    options.authTokenPrefix = options.authTokenPrefix || 'Bearer';\n    options.fieldName = options.fieldName || 'file';\n  }\n\n}\n\nImageUploaderService.ɵfac = function ImageUploaderService_Factory(t) {\n  return new (t || ImageUploaderService)(ɵngcc0.ɵɵinject(ɵngcc1.HttpClient));\n};\n\nImageUploaderService.ɵprov = /*@__PURE__*/ɵngcc0.ɵɵdefineInjectable({\n  token: ImageUploaderService,\n  factory: ImageUploaderService.ɵfac,\n  providedIn: 'root'\n});\n/** @nocollapse */\n\nImageUploaderService.ctorParameters = () => [{\n  type: HttpClient\n}];\n/** @nocollapse */\n\n\nImageUploaderService.ngInjectableDef = defineInjectable({\n  factory: function ImageUploaderService_Factory() {\n    return new ImageUploaderService(inject(HttpClient));\n  },\n  token: ImageUploaderService,\n  providedIn: \"root\"\n});\n\n(function () {\n  (typeof ngDevMode === \"undefined\" || ngDevMode) && ɵngcc0.ɵsetClassMetadata(ImageUploaderService, [{\n    type: Injectable,\n    args: [{\n      providedIn: 'root'\n    }]\n  }], function () {\n    return [{\n      type: ɵngcc1.HttpClient\n    }];\n  }, null);\n})();\n/**\r\n * @fileoverview added by tsickle\r\n * @suppress {checkTypes} checked by tsc\r\n */\n\n/**\r\n * @param {?} url\r\n * @param {?} cb\r\n * @return {?}\r\n */\n\n\nfunction createImage(url, cb) {\n  const\n  /** @type {?} */\n  image = new Image();\n\n  image.onload = function () {\n    cb(image);\n  };\n\n  image.src = url;\n}\n\nconst\n/** @type {?} */\nresizeAreaId = 'imageupload-resize-area';\n/**\r\n * @return {?}\r\n */\n\nfunction getResizeArea() {\n  let\n  /** @type {?} */\n  resizeArea = document.getElementById(resizeAreaId);\n\n  if (!resizeArea) {\n    resizeArea = document.createElement('canvas');\n    resizeArea.id = resizeAreaId;\n    resizeArea.style.display = 'none';\n    document.body.appendChild(resizeArea);\n  }\n\n  return (\n    /** @type {?} */\n    resizeArea\n  );\n}\n/**\r\n * @param {?} origImage\r\n * @param {?=} __1\r\n * @return {?}\r\n */\n\n\nfunction resizeImage(origImage, {\n  resizeHeight,\n  resizeWidth,\n  resizeQuality = 0.7,\n  resizeType = 'image/jpeg',\n  resizeMode = 'fill'\n} = {}) {\n  const\n  /** @type {?} */\n  canvas = getResizeArea();\n  let\n  /** @type {?} */\n  height = origImage.height;\n  let\n  /** @type {?} */\n  width = origImage.width;\n  let\n  /** @type {?} */\n  offsetX = 0;\n  let\n  /** @type {?} */\n  offsetY = 0;\n\n  if (resizeMode === 'fill') {\n    // calculate the width and height, constraining the proportions\n    if (width / height > resizeWidth / resizeHeight) {\n      width = Math.round(height * resizeWidth / resizeHeight);\n    } else {\n      height = Math.round(width * resizeHeight / resizeWidth);\n    }\n\n    canvas.width = resizeWidth <= width ? resizeWidth : width;\n    canvas.height = resizeHeight <= height ? resizeHeight : height;\n    offsetX = origImage.width / 2 - width / 2;\n    offsetY = origImage.height / 2 - height / 2; // draw image on canvas\n\n    const\n    /** @type {?} */\n    ctx = canvas.getContext('2d');\n    ctx.drawImage(origImage, offsetX, offsetY, width, height, 0, 0, canvas.width, canvas.height);\n  } else if (resizeMode === 'fit') {\n    // calculate the width and height, constraining the proportions\n    if (width > height) {\n      if (width > resizeWidth) {\n        height = Math.round(height *= resizeWidth / width);\n        width = resizeWidth;\n      }\n    } else {\n      if (height > resizeHeight) {\n        width = Math.round(width *= resizeHeight / height);\n        height = resizeHeight;\n      }\n    }\n\n    canvas.width = width;\n    canvas.height = height; // draw image on canvas\n\n    const\n    /** @type {?} */\n    ctx = canvas.getContext('2d');\n    ctx.drawImage(origImage, 0, 0, width, height);\n  } else {\n    throw new Error('Unknown resizeMode: ' + resizeMode);\n  } // get the data from canvas as 70% jpg (or specified type).\n\n\n  return canvas.toDataURL(resizeType, resizeQuality);\n}\n/**\r\n * @fileoverview added by tsickle\r\n * @suppress {checkTypes} checked by tsc\r\n */\n\n/** @enum {number} */\n\n\nconst Status = {\n  NotSelected: 0,\n  Selected: 1,\n  Uploading: 2,\n  Loading: 3,\n  Loaded: 4,\n  Error: 5\n};\nStatus[Status.NotSelected] = \"NotSelected\";\nStatus[Status.Selected] = \"Selected\";\nStatus[Status.Uploading] = \"Uploading\";\nStatus[Status.Loading] = \"Loading\";\nStatus[Status.Loaded] = \"Loaded\";\nStatus[Status.Error] = \"Error\";\n\nclass ImageUploaderComponent {\n  /**\r\n   * @param {?} renderer\r\n   * @param {?} uploader\r\n   * @param {?} changeDetector\r\n   */\n  constructor(renderer, uploader, changeDetector) {\n    this.renderer = renderer;\n    this.uploader = uploader;\n    this.changeDetector = changeDetector;\n    this.statusEnum = Status;\n    this._status = Status.NotSelected;\n    this.thumbnailWidth = 150;\n    this.thumbnailHeight = 150;\n    this.cropper = undefined;\n    this.upload = new EventEmitter();\n    this.statusChange = new EventEmitter();\n\n    this.propagateChange = _ => {};\n  }\n  /**\r\n   * @return {?}\r\n   */\n\n\n  get imageThumbnail() {\n    return this._imageThumbnail;\n  }\n  /**\r\n   * @param {?} value\r\n   * @return {?}\r\n   */\n\n\n  set imageThumbnail(value) {\n    this._imageThumbnail = value;\n    this.propagateChange(this._imageThumbnail);\n\n    if (value !== undefined) {\n      this.status = Status.Selected;\n    } else {\n      this.status = Status.NotSelected;\n    }\n  }\n  /**\r\n   * @return {?}\r\n   */\n\n\n  get errorMessage() {\n    return this._errorMessage;\n  }\n  /**\r\n   * @param {?} value\r\n   * @return {?}\r\n   */\n\n\n  set errorMessage(value) {\n    this._errorMessage = value;\n\n    if (value) {\n      this.status = Status.Error;\n    } else {\n      this.status = Status.NotSelected;\n    }\n  }\n  /**\r\n   * @return {?}\r\n   */\n\n\n  get status() {\n    return this._status;\n  }\n  /**\r\n   * @param {?} value\r\n   * @return {?}\r\n   */\n\n\n  set status(value) {\n    this._status = value;\n    this.statusChange.emit(value);\n  }\n  /**\r\n   * @param {?} value\r\n   * @return {?}\r\n   */\n\n\n  writeValue(value) {\n    if (value) {\n      this.loadAndResize(value);\n    } else {\n      this._imageThumbnail = undefined;\n      this.status = Status.NotSelected;\n    }\n  }\n  /**\r\n   * @param {?} fn\r\n   * @return {?}\r\n   */\n\n\n  registerOnChange(fn) {\n    this.propagateChange = fn;\n  }\n  /**\r\n   * @return {?}\r\n   */\n\n\n  registerOnTouched() {}\n  /**\r\n   * @return {?}\r\n   */\n\n\n  ngOnInit() {\n    if (this.options) {\n      if (this.options.thumbnailWidth) {\n        this.thumbnailWidth = this.options.thumbnailWidth;\n      }\n\n      if (this.options.thumbnailHeight) {\n        this.thumbnailHeight = this.options.thumbnailHeight;\n      }\n\n      if (this.options.resizeOnLoad === undefined) {\n        this.options.resizeOnLoad = true;\n      }\n\n      if (this.options.autoUpload === undefined) {\n        this.options.autoUpload = true;\n      }\n\n      if (this.options.cropEnabled === undefined) {\n        this.options.cropEnabled = false;\n      }\n\n      if (this.options.autoUpload && this.options.cropEnabled) {\n        throw new Error('autoUpload and cropEnabled cannot be enabled simultaneously');\n      }\n    }\n  }\n  /**\r\n   * @return {?}\r\n   */\n\n\n  ngAfterViewChecked() {\n    if (this.options && this.options.cropEnabled && this.imageElement && this.fileToUpload && !this.cropper) {\n      this.cropper = new Cropper(this.imageElement.nativeElement, {\n        viewMode: 1,\n        aspectRatio: this.options.cropAspectRatio ? this.options.cropAspectRatio : null\n      });\n    }\n  }\n  /**\r\n   * @return {?}\r\n   */\n\n\n  ngOnDestroy() {\n    if (this.cropper) {\n      this.cropper.destroy();\n      this.cropper = null;\n    }\n  }\n  /**\r\n   * @param {?} url\r\n   * @return {?}\r\n   */\n\n\n  loadAndResize(url) {\n    this.status = Status.Loading;\n    this.uploader.getFile(url, this.options).subscribe(file => {\n      if (this.options.resizeOnLoad) {\n        // thumbnail\n        const\n        /** @type {?} */\n        result = {\n          file: file,\n          url: URL.createObjectURL(file)\n        };\n        this.resize(result).then(r => {\n          this._imageThumbnail = r.resized.dataURL;\n          this.status = Status.Loaded;\n        });\n      } else {\n        const\n        /** @type {?} */\n        result = {\n          file: null,\n          url: null\n        };\n        this.fileToDataURL(file, result).then(r => {\n          this._imageThumbnail = r.dataURL;\n          this.status = Status.Loaded;\n        });\n      }\n    }, error => {\n      this.errorMessage = error || 'Error while getting an image';\n    });\n  }\n  /**\r\n   * @return {?}\r\n   */\n\n\n  onImageClicked() {\n    this.renderer.invokeElementMethod(this.fileInputElement.nativeElement, 'click');\n  }\n  /**\r\n   * @return {?}\r\n   */\n\n\n  onFileChanged() {\n    const\n    /** @type {?} */\n    file = this.fileInputElement.nativeElement.files[0];\n\n    if (!file) {\n      return;\n    }\n\n    this.validateAndUpload(file);\n  }\n  /**\r\n   * @param {?} file\r\n   * @return {?}\r\n   */\n\n\n  validateAndUpload(file) {\n    this.propagateChange(null);\n\n    if (this.options && this.options.allowedImageTypes) {\n      if (!this.options.allowedImageTypes.some(allowedType => file.type === allowedType)) {\n        this.errorMessage = 'Only these image types are allowed: ' + this.options.allowedImageTypes.join(', ');\n        return;\n      }\n    }\n\n    if (this.options && this.options.maxImageSize) {\n      if (file.size > this.options.maxImageSize * 1024 * 1024) {\n        this.errorMessage = `Image must not be larger than ${this.options.maxImageSize} MB`;\n        return;\n      }\n    }\n\n    this.fileToUpload = file;\n\n    if (this.options && this.options.autoUpload) {\n      this.uploadImage();\n    } // thumbnail\n\n\n    const\n    /** @type {?} */\n    result = {\n      file: file,\n      url: URL.createObjectURL(file)\n    };\n    this.resize(result).then(r => {\n      this._imageThumbnail = r.resized.dataURL;\n      this.origImageWidth = r.width;\n      this.orgiImageHeight = r.height;\n\n      if (this.options && !this.options.autoUpload) {\n        this.status = Status.Selected;\n      }\n    });\n  }\n  /**\r\n   * @return {?}\r\n   */\n\n\n  uploadImage() {\n    this.progress = 0;\n    this.status = Status.Uploading;\n    let\n    /** @type {?} */\n    cropOptions;\n\n    if (this.cropper) {\n      const\n      /** @type {?} */\n      scale = this.origImageWidth / this.cropper.getImageData().naturalWidth;\n      const\n      /** @type {?} */\n      cropData = this.cropper.getData();\n      cropOptions = {\n        x: Math.round(cropData.x * scale),\n        y: Math.round(cropData.y * scale),\n        width: Math.round(cropData.width * scale),\n        height: Math.round(cropData.height * scale)\n      };\n    } // const queueObj = this.uploader.uploadFile(this.fileToUpload, this.options, cropOptions);\n    // file progress\n\n\n    this.uploader.uploadFile(this.fileToUpload, this.options, cropOptions).subscribe(file => {\n      this.progress = file.progress;\n\n      if (file.isError()) {\n        if (file.response.status || file.response.statusText) {\n          this.errorMessage = `${file.response.status}: ${file.response.statusText}`;\n        } else {\n          this.errorMessage = 'Error while uploading';\n        } // on some upload errors change detection does not work, so we are forcing manually\n\n\n        this.changeDetector.detectChanges();\n      }\n\n      if (!file.inProgress()) {\n        // notify that value was changed only when image was uploaded and no error\n        if (file.isSuccess()) {\n          this.propagateChange(this._imageThumbnail);\n          this.status = Status.Selected;\n          this.fileToUpload = undefined;\n        }\n\n        this.upload.emit(file);\n      }\n    });\n  }\n  /**\r\n   * @return {?}\r\n   */\n\n\n  removeImage() {\n    this.fileInputElement.nativeElement.value = null;\n    this.imageThumbnail = undefined;\n\n    if (this.cropper) {\n      this.cropper.destroy();\n      this.cropper = null;\n    }\n  }\n  /**\r\n   * @return {?}\r\n   */\n\n\n  dismissError() {\n    this.errorMessage = undefined;\n    this.removeImage();\n  }\n  /**\r\n   * @param {?} e\r\n   * @return {?}\r\n   */\n\n\n  drop(e) {\n    e.preventDefault();\n    e.stopPropagation();\n\n    if (!e.dataTransfer || !e.dataTransfer.files.length) {\n      return;\n    }\n\n    this.validateAndUpload(e.dataTransfer.files[0]);\n    this.updateDragOverlayStyles(false);\n  }\n  /**\r\n   * @param {?} e\r\n   * @return {?}\r\n   */\n\n\n  dragenter(e) {\n    e.preventDefault();\n    e.stopPropagation();\n  }\n  /**\r\n   * @param {?} e\r\n   * @return {?}\r\n   */\n\n\n  dragover(e) {\n    e.preventDefault();\n    e.stopPropagation();\n    this.updateDragOverlayStyles(true);\n  }\n  /**\r\n   * @param {?} e\r\n   * @return {?}\r\n   */\n\n\n  dragleave(e) {\n    e.preventDefault();\n    e.stopPropagation();\n    this.updateDragOverlayStyles(false);\n  }\n  /**\r\n   * @param {?} isDragOver\r\n   * @return {?}\r\n   */\n\n\n  updateDragOverlayStyles(isDragOver) {// TODO: find a way that does not trigger dragleave when displaying overlay\n    // if (isDragOver) {\n    //  this.renderer.setElementStyle(this.dragOverlayElement.nativeElement, 'display', 'block');\n    // } else {\n    //  this.renderer.setElementStyle(this.dragOverlayElement.nativeElement, 'display', 'none');\n    // }\n  }\n  /**\r\n   * @param {?} result\r\n   * @return {?}\r\n   */\n\n\n  resize(result) {\n    const\n    /** @type {?} */\n    resizeOptions = {\n      resizeHeight: this.thumbnailHeight,\n      resizeWidth: this.thumbnailWidth,\n      resizeType: result.file.type,\n      resizeMode: this.options.thumbnailResizeMode\n    };\n    return new Promise(resolve => {\n      createImage(result.url, image => {\n        const\n        /** @type {?} */\n        dataUrl = resizeImage(image, resizeOptions);\n        result.width = image.width;\n        result.height = image.height;\n        result.resized = {\n          dataURL: dataUrl,\n          type: this.getType(dataUrl)\n        };\n        resolve(result);\n      });\n    });\n  }\n  /**\r\n   * @param {?} dataUrl\r\n   * @return {?}\r\n   */\n\n\n  getType(dataUrl) {\n    return dataUrl.match(/:(.+\\/.+;)/)[1];\n  }\n  /**\r\n   * @param {?} file\r\n   * @param {?} result\r\n   * @return {?}\r\n   */\n\n\n  fileToDataURL(file, result) {\n    return new Promise(resolve => {\n      const\n      /** @type {?} */\n      reader = new FileReader();\n\n      reader.onload = function (e) {\n        result.dataURL = reader.result;\n        resolve(result);\n      };\n\n      reader.readAsDataURL(file);\n    });\n  }\n\n}\n\nImageUploaderComponent.ɵfac = function ImageUploaderComponent_Factory(t) {\n  return new (t || ImageUploaderComponent)(ɵngcc0.ɵɵdirectiveInject(Renderer), ɵngcc0.ɵɵdirectiveInject(ImageUploaderService), ɵngcc0.ɵɵdirectiveInject(ɵngcc0.ChangeDetectorRef));\n};\n\nImageUploaderComponent.ɵcmp = /*@__PURE__*/ɵngcc0.ɵɵdefineComponent({\n  type: ImageUploaderComponent,\n  selectors: [[\"ngx-image-uploader\"]],\n  viewQuery: function ImageUploaderComponent_Query(rf, ctx) {\n    if (rf & 1) {\n      ɵngcc0.ɵɵviewQuery(_c0, 5);\n      ɵngcc0.ɵɵviewQuery(_c1, 5);\n      ɵngcc0.ɵɵviewQuery(_c2, 5);\n    }\n\n    if (rf & 2) {\n      let _t;\n\n      ɵngcc0.ɵɵqueryRefresh(_t = ɵngcc0.ɵɵloadQuery()) && (ctx.imageElement = _t.first);\n      ɵngcc0.ɵɵqueryRefresh(_t = ɵngcc0.ɵɵloadQuery()) && (ctx.fileInputElement = _t.first);\n      ɵngcc0.ɵɵqueryRefresh(_t = ɵngcc0.ɵɵloadQuery()) && (ctx.dragOverlayElement = _t.first);\n    }\n  },\n  hostVars: 4,\n  hostBindings: function ImageUploaderComponent_HostBindings(rf, ctx) {\n    if (rf & 1) {\n      ɵngcc0.ɵɵlistener(\"drop\", function ImageUploaderComponent_drop_HostBindingHandler($event) {\n        return ctx.drop($event);\n      })(\"dragenter\", function ImageUploaderComponent_dragenter_HostBindingHandler($event) {\n        return ctx.dragenter($event);\n      })(\"dragover\", function ImageUploaderComponent_dragover_HostBindingHandler($event) {\n        return ctx.dragover($event);\n      })(\"dragleave\", function ImageUploaderComponent_dragleave_HostBindingHandler($event) {\n        return ctx.dragleave($event);\n      });\n    }\n\n    if (rf & 2) {\n      ɵngcc0.ɵɵstyleProp(\"width\", ctx.thumbnailWidth + \"px\")(\"height\", ctx.thumbnailHeight + \"px\");\n    }\n  },\n  inputs: {\n    options: \"options\"\n  },\n  outputs: {\n    upload: \"upload\",\n    statusChange: \"statusChange\"\n  },\n  features: [ɵngcc0.ɵɵProvidersFeature([{\n    provide: NG_VALUE_ACCESSOR,\n    useExisting: forwardRef(() => ImageUploaderComponent),\n    multi: true\n  }])],\n  decls: 12,\n  vars: 8,\n  consts: [[1, \"image-container\"], [1, \"match-parent\", 3, \"ngSwitch\"], [\"class\", \"match-parent\", 4, \"ngSwitchCase\"], [\"class\", \"selected-status-wrapper match-parent\", 4, \"ngSwitchCase\"], [4, \"ngSwitchCase\"], [\"type\", \"file\", 3, \"change\"], [\"fileInput\", \"\"], [1, \"drag-overlay\", 3, \"hidden\"], [\"dragOverlay\", \"\"], [1, \"match-parent\"], [\"type\", \"button\", 1, \"add-image-btn\", 3, \"click\"], [1, \"plus\"], [1, \"selected-status-wrapper\", \"match-parent\"], [3, \"src\"], [\"imageElement\", \"\"], [\"type\", \"button\", 1, \"remove\", 3, \"click\"], [3, \"click\"], [1, \"progress-bar\"], [1, \"bar\"], [1, \"sk-fading-circle\"], [1, \"sk-circle1\", \"sk-circle\"], [1, \"sk-circle2\", \"sk-circle\"], [1, \"sk-circle3\", \"sk-circle\"], [1, \"sk-circle4\", \"sk-circle\"], [1, \"sk-circle5\", \"sk-circle\"], [1, \"sk-circle6\", \"sk-circle\"], [1, \"sk-circle7\", \"sk-circle\"], [1, \"sk-circle8\", \"sk-circle\"], [1, \"sk-circle9\", \"sk-circle\"], [1, \"sk-circle10\", \"sk-circle\"], [1, \"sk-circle11\", \"sk-circle\"], [1, \"sk-circle12\", \"sk-circle\"], [1, \"error\"], [1, \"error-message\"]],\n  template: function ImageUploaderComponent_Template(rf, ctx) {\n    if (rf & 1) {\n      ɵngcc0.ɵɵelementStart(0, \"div\", 0)(1, \"div\", 1);\n      ɵngcc0.ɵɵtemplate(2, ImageUploaderComponent_div_2_Template, 9, 0, \"div\", 2);\n      ɵngcc0.ɵɵtemplate(3, ImageUploaderComponent_div_3_Template, 5, 1, \"div\", 3);\n      ɵngcc0.ɵɵtemplate(4, ImageUploaderComponent_div_4_Template, 5, 1, \"div\", 3);\n      ɵngcc0.ɵɵtemplate(5, ImageUploaderComponent_div_5_Template, 4, 3, \"div\", 4);\n      ɵngcc0.ɵɵtemplate(6, ImageUploaderComponent_div_6_Template, 14, 0, \"div\", 2);\n      ɵngcc0.ɵɵtemplate(7, ImageUploaderComponent_div_7_Template, 7, 1, \"div\", 2);\n      ɵngcc0.ɵɵelementEnd();\n      ɵngcc0.ɵɵelementStart(8, \"input\", 5, 6);\n      ɵngcc0.ɵɵlistener(\"change\", function ImageUploaderComponent_Template_input_change_8_listener() {\n        return ctx.onFileChanged();\n      });\n      ɵngcc0.ɵɵelementEnd();\n      ɵngcc0.ɵɵelement(10, \"div\", 7, 8);\n      ɵngcc0.ɵɵelementEnd();\n    }\n\n    if (rf & 2) {\n      ɵngcc0.ɵɵadvance(1);\n      ɵngcc0.ɵɵproperty(\"ngSwitch\", ctx.status);\n      ɵngcc0.ɵɵadvance(1);\n      ɵngcc0.ɵɵproperty(\"ngSwitchCase\", ctx.statusEnum.NotSelected);\n      ɵngcc0.ɵɵadvance(1);\n      ɵngcc0.ɵɵproperty(\"ngSwitchCase\", ctx.statusEnum.Loaded);\n      ɵngcc0.ɵɵadvance(1);\n      ɵngcc0.ɵɵproperty(\"ngSwitchCase\", ctx.statusEnum.Selected);\n      ɵngcc0.ɵɵadvance(1);\n      ɵngcc0.ɵɵproperty(\"ngSwitchCase\", ctx.statusEnum.Uploading);\n      ɵngcc0.ɵɵadvance(1);\n      ɵngcc0.ɵɵproperty(\"ngSwitchCase\", ctx.statusEnum.Loading);\n      ɵngcc0.ɵɵadvance(1);\n      ɵngcc0.ɵɵproperty(\"ngSwitchCase\", ctx.statusEnum.Error);\n      ɵngcc0.ɵɵadvance(3);\n      ɵngcc0.ɵɵproperty(\"hidden\", true);\n    }\n  },\n  dependencies: [ɵngcc2.NgSwitch, ɵngcc2.NgSwitchCase],\n  styles: [\"[_nghost-%COMP%]{display:block}.match-parent[_ngcontent-%COMP%]{width:100%;height:100%}.add-image-btn[_ngcontent-%COMP%]{width:100%;height:100%;font-weight:700;opacity:.5;border:0}.add-image-btn[_ngcontent-%COMP%]:hover{opacity:.7;cursor:pointer;background-color:#ddd;box-shadow:inset 0 0 5px rgba(0,0,0,.3)}.add-image-btn[_ngcontent-%COMP%]   .plus[_ngcontent-%COMP%]{font-size:30px;font-weight:400;margin-bottom:5px;margin-top:5px}img[_ngcontent-%COMP%]{cursor:pointer;position:absolute;top:50%;left:50%;margin-right:-50%;-webkit-transform:translate(-50%,-50%);transform:translate(-50%,-50%);max-width:100%}.image-container[_ngcontent-%COMP%]{width:100%;height:100%;position:relative;display:inline-block;background-color:#f1f1f1;box-shadow:inset 0 0 5px rgba(0,0,0,.2)}.remove[_ngcontent-%COMP%]{position:absolute;top:0;right:0;width:40px;height:40px;font-size:25px;text-align:center;opacity:.8;border:0;cursor:pointer}.selected-status-wrapper[_ngcontent-%COMP%] > .remove[_ngcontent-%COMP%]:hover{opacity:.7;background-color:#fff}.error[_ngcontent-%COMP%]   .remove[_ngcontent-%COMP%]{opacity:.5}.error[_ngcontent-%COMP%]   .remove[_ngcontent-%COMP%]:hover{opacity:.7}input[_ngcontent-%COMP%]{display:none}.error[_ngcontent-%COMP%]{width:100%;height:100%;border:1px solid #e3a5a2;color:#d2706b;background-color:#fbf1f0;position:relative;text-align:center;display:flex;align-items:center}.error-message[_ngcontent-%COMP%]{width:100%;line-height:18px}.progress-bar[_ngcontent-%COMP%]{position:absolute;bottom:10%;left:10%;width:80%;height:5px;background-color:grey;opacity:.9;overflow:hidden}.bar[_ngcontent-%COMP%]{position:absolute;height:100%;background-color:#a4c639}.drag-overlay[_ngcontent-%COMP%]{position:absolute;top:0;left:0;width:100%;height:100%;background-color:#ff0;opacity:.3}.sk-fading-circle[_ngcontent-%COMP%]{width:40px;height:40px;position:relative;top:50%;left:50%;-webkit-transform:translate(-50%,-50%);transform:translate(-50%,-50%)}.sk-fading-circle[_ngcontent-%COMP%]   .sk-circle[_ngcontent-%COMP%]{width:100%;height:100%;position:absolute;left:0;top:0}.sk-fading-circle[_ngcontent-%COMP%]   .sk-circle[_ngcontent-%COMP%]:before{content:'';display:block;margin:0 auto;width:15%;height:15%;background-color:#333;border-radius:100%;-webkit-animation:1.2s ease-in-out infinite both sk-circleFadeDelay;animation:1.2s ease-in-out infinite both sk-circleFadeDelay}.sk-fading-circle[_ngcontent-%COMP%]   .sk-circle2[_ngcontent-%COMP%]{-webkit-transform:rotate(30deg);transform:rotate(30deg)}.sk-fading-circle[_ngcontent-%COMP%]   .sk-circle3[_ngcontent-%COMP%]{-webkit-transform:rotate(60deg);transform:rotate(60deg)}.sk-fading-circle[_ngcontent-%COMP%]   .sk-circle4[_ngcontent-%COMP%]{-webkit-transform:rotate(90deg);transform:rotate(90deg)}.sk-fading-circle[_ngcontent-%COMP%]   .sk-circle5[_ngcontent-%COMP%]{-webkit-transform:rotate(120deg);transform:rotate(120deg)}.sk-fading-circle[_ngcontent-%COMP%]   .sk-circle6[_ngcontent-%COMP%]{-webkit-transform:rotate(150deg);transform:rotate(150deg)}.sk-fading-circle[_ngcontent-%COMP%]   .sk-circle7[_ngcontent-%COMP%]{-webkit-transform:rotate(180deg);transform:rotate(180deg)}.sk-fading-circle[_ngcontent-%COMP%]   .sk-circle8[_ngcontent-%COMP%]{-webkit-transform:rotate(210deg);transform:rotate(210deg)}.sk-fading-circle[_ngcontent-%COMP%]   .sk-circle9[_ngcontent-%COMP%]{-webkit-transform:rotate(240deg);transform:rotate(240deg)}.sk-fading-circle[_ngcontent-%COMP%]   .sk-circle10[_ngcontent-%COMP%]{-webkit-transform:rotate(270deg);transform:rotate(270deg)}.sk-fading-circle[_ngcontent-%COMP%]   .sk-circle11[_ngcontent-%COMP%]{-webkit-transform:rotate(300deg);transform:rotate(300deg)}.sk-fading-circle[_ngcontent-%COMP%]   .sk-circle12[_ngcontent-%COMP%]{-webkit-transform:rotate(330deg);transform:rotate(330deg)}.sk-fading-circle[_ngcontent-%COMP%]   .sk-circle2[_ngcontent-%COMP%]:before{-webkit-animation-delay:-1.1s;animation-delay:-1.1s}.sk-fading-circle[_ngcontent-%COMP%]   .sk-circle3[_ngcontent-%COMP%]:before{-webkit-animation-delay:-1s;animation-delay:-1s}.sk-fading-circle[_ngcontent-%COMP%]   .sk-circle4[_ngcontent-%COMP%]:before{-webkit-animation-delay:-.9s;animation-delay:-.9s}.sk-fading-circle[_ngcontent-%COMP%]   .sk-circle5[_ngcontent-%COMP%]:before{-webkit-animation-delay:-.8s;animation-delay:-.8s}.sk-fading-circle[_ngcontent-%COMP%]   .sk-circle6[_ngcontent-%COMP%]:before{-webkit-animation-delay:-.7s;animation-delay:-.7s}.sk-fading-circle[_ngcontent-%COMP%]   .sk-circle7[_ngcontent-%COMP%]:before{-webkit-animation-delay:-.6s;animation-delay:-.6s}.sk-fading-circle[_ngcontent-%COMP%]   .sk-circle8[_ngcontent-%COMP%]:before{-webkit-animation-delay:-.5s;animation-delay:-.5s}.sk-fading-circle[_ngcontent-%COMP%]   .sk-circle9[_ngcontent-%COMP%]:before{-webkit-animation-delay:-.4s;animation-delay:-.4s}.sk-fading-circle[_ngcontent-%COMP%]   .sk-circle10[_ngcontent-%COMP%]:before{-webkit-animation-delay:-.3s;animation-delay:-.3s}.sk-fading-circle[_ngcontent-%COMP%]   .sk-circle11[_ngcontent-%COMP%]:before{-webkit-animation-delay:-.2s;animation-delay:-.2s}.sk-fading-circle[_ngcontent-%COMP%]   .sk-circle12[_ngcontent-%COMP%]:before{-webkit-animation-delay:-.1s;animation-delay:-.1s}@-webkit-keyframes sk-circleFadeDelay{0%,100%,39%{opacity:0}40%{opacity:1}}@keyframes sk-circleFadeDelay{0%,100%,39%{opacity:0}40%{opacity:1}}\"]\n});\n/** @nocollapse */\n\nImageUploaderComponent.ctorParameters = () => [{\n  type: Renderer\n}, {\n  type: ImageUploaderService\n}, {\n  type: ChangeDetectorRef\n}];\n\nImageUploaderComponent.propDecorators = {\n  \"imageElement\": [{\n    type: ViewChild,\n    args: ['imageElement']\n  }],\n  \"fileInputElement\": [{\n    type: ViewChild,\n    args: ['fileInput']\n  }],\n  \"dragOverlayElement\": [{\n    type: ViewChild,\n    args: ['dragOverlay']\n  }],\n  \"options\": [{\n    type: Input\n  }],\n  \"upload\": [{\n    type: Output\n  }],\n  \"statusChange\": [{\n    type: Output\n  }],\n  \"drop\": [{\n    type: HostListener,\n    args: ['drop', ['$event']]\n  }],\n  \"dragenter\": [{\n    type: HostListener,\n    args: ['dragenter', ['$event']]\n  }],\n  \"dragover\": [{\n    type: HostListener,\n    args: ['dragover', ['$event']]\n  }],\n  \"dragleave\": [{\n    type: HostListener,\n    args: ['dragleave', ['$event']]\n  }]\n};\n\n(function () {\n  (typeof ngDevMode === \"undefined\" || ngDevMode) && ɵngcc0.ɵsetClassMetadata(ImageUploaderComponent, [{\n    type: Component,\n    args: [{\n      selector: 'ngx-image-uploader',\n      template: `<div class=\"image-container\">\n  <div class=\"match-parent\" [ngSwitch]=\"status\">\n\n    <div class=\"match-parent\" *ngSwitchCase=\"statusEnum.NotSelected\">\n      <button type=\"button\" class=\"add-image-btn\" (click)=\"onImageClicked()\">\n          <div>\n            <p class=\"plus\">+</p>\n            <p>Click here to add image</p>\n            <p>Or drop image here</p>\n          </div>\n      </button>\n    </div>\n\n    <div class=\"selected-status-wrapper match-parent\" *ngSwitchCase=\"statusEnum.Loaded\">\n      <img [src]=\"imageThumbnail\" #imageElement>\n\n      <button type=\"button\" class=\"remove\" (click)=\"removeImage()\">×</button>\n    </div>\n\n    <div class=\"selected-status-wrapper match-parent\" *ngSwitchCase=\"statusEnum.Selected\">\n      <img [src]=\"imageThumbnail\" #imageElement>\n\n      <button type=\"button\" class=\"remove\" (click)=\"removeImage()\">×</button>\n    </div>\n\n    <div *ngSwitchCase=\"statusEnum.Uploading\">\n      <img [attr.src]=\"imageThumbnail ? imageThumbnail : null\" (click)=\"onImageClicked()\">\n\n      <div class=\"progress-bar\">\n        <div class=\"bar\" [style.width]=\"progress+'%'\"></div>\n      </div>\n    </div>\n\n    <div class=\"match-parent\" *ngSwitchCase=\"statusEnum.Loading\">\n      <div class=\"sk-fading-circle\">\n        <div class=\"sk-circle1 sk-circle\"></div>\n        <div class=\"sk-circle2 sk-circle\"></div>\n        <div class=\"sk-circle3 sk-circle\"></div>\n        <div class=\"sk-circle4 sk-circle\"></div>\n        <div class=\"sk-circle5 sk-circle\"></div>\n        <div class=\"sk-circle6 sk-circle\"></div>\n        <div class=\"sk-circle7 sk-circle\"></div>\n        <div class=\"sk-circle8 sk-circle\"></div>\n        <div class=\"sk-circle9 sk-circle\"></div>\n        <div class=\"sk-circle10 sk-circle\"></div>\n        <div class=\"sk-circle11 sk-circle\"></div>\n        <div class=\"sk-circle12 sk-circle\"></div>\n      </div>\n    </div>\n\n    <div class=\"match-parent\" *ngSwitchCase=\"statusEnum.Error\">\n      <div class=\"error\">\n        <div class=\"error-message\">\n          <p>{{errorMessage}}</p>\n        </div>\n        <button type=\"button\" class=\"remove\" (click)=\"dismissError()\">×</button>\n      </div>\n    </div>\n  </div>\n\n  <input type=\"file\" #fileInput (change)=\"onFileChanged()\">\n  <div class=\"drag-overlay\" [hidden]=\"true\" #dragOverlay></div>\n</div>\n`,\n      host: {\n        '[style.width]': 'thumbnailWidth + \"px\"',\n        '[style.height]': 'thumbnailHeight + \"px\"'\n      },\n      providers: [{\n        provide: NG_VALUE_ACCESSOR,\n        useExisting: forwardRef(() => ImageUploaderComponent),\n        multi: true\n      }],\n      styles: [\":host{display:block}.match-parent{width:100%;height:100%}.add-image-btn{width:100%;height:100%;font-weight:700;opacity:.5;border:0}.add-image-btn:hover{opacity:.7;cursor:pointer;background-color:#ddd;box-shadow:inset 0 0 5px rgba(0,0,0,.3)}.add-image-btn .plus{font-size:30px;font-weight:400;margin-bottom:5px;margin-top:5px}img{cursor:pointer;position:absolute;top:50%;left:50%;margin-right:-50%;-webkit-transform:translate(-50%,-50%);transform:translate(-50%,-50%);max-width:100%}.image-container{width:100%;height:100%;position:relative;display:inline-block;background-color:#f1f1f1;box-shadow:inset 0 0 5px rgba(0,0,0,.2)}.remove{position:absolute;top:0;right:0;width:40px;height:40px;font-size:25px;text-align:center;opacity:.8;border:0;cursor:pointer}.selected-status-wrapper>.remove:hover{opacity:.7;background-color:#fff}.error .remove{opacity:.5}.error .remove:hover{opacity:.7}input{display:none}.error{width:100%;height:100%;border:1px solid #e3a5a2;color:#d2706b;background-color:#fbf1f0;position:relative;text-align:center;display:flex;align-items:center}.error-message{width:100%;line-height:18px}.progress-bar{position:absolute;bottom:10%;left:10%;width:80%;height:5px;background-color:grey;opacity:.9;overflow:hidden}.bar{position:absolute;height:100%;background-color:#a4c639}.drag-overlay{position:absolute;top:0;left:0;width:100%;height:100%;background-color:#ff0;opacity:.3}.sk-fading-circle{width:40px;height:40px;position:relative;top:50%;left:50%;-webkit-transform:translate(-50%,-50%);transform:translate(-50%,-50%)}.sk-fading-circle .sk-circle{width:100%;height:100%;position:absolute;left:0;top:0}.sk-fading-circle .sk-circle:before{content:'';display:block;margin:0 auto;width:15%;height:15%;background-color:#333;border-radius:100%;-webkit-animation:1.2s ease-in-out infinite both sk-circleFadeDelay;animation:1.2s ease-in-out infinite both sk-circleFadeDelay}.sk-fading-circle .sk-circle2{-webkit-transform:rotate(30deg);transform:rotate(30deg)}.sk-fading-circle .sk-circle3{-webkit-transform:rotate(60deg);transform:rotate(60deg)}.sk-fading-circle .sk-circle4{-webkit-transform:rotate(90deg);transform:rotate(90deg)}.sk-fading-circle .sk-circle5{-webkit-transform:rotate(120deg);transform:rotate(120deg)}.sk-fading-circle .sk-circle6{-webkit-transform:rotate(150deg);transform:rotate(150deg)}.sk-fading-circle .sk-circle7{-webkit-transform:rotate(180deg);transform:rotate(180deg)}.sk-fading-circle .sk-circle8{-webkit-transform:rotate(210deg);transform:rotate(210deg)}.sk-fading-circle .sk-circle9{-webkit-transform:rotate(240deg);transform:rotate(240deg)}.sk-fading-circle .sk-circle10{-webkit-transform:rotate(270deg);transform:rotate(270deg)}.sk-fading-circle .sk-circle11{-webkit-transform:rotate(300deg);transform:rotate(300deg)}.sk-fading-circle .sk-circle12{-webkit-transform:rotate(330deg);transform:rotate(330deg)}.sk-fading-circle .sk-circle2:before{-webkit-animation-delay:-1.1s;animation-delay:-1.1s}.sk-fading-circle .sk-circle3:before{-webkit-animation-delay:-1s;animation-delay:-1s}.sk-fading-circle .sk-circle4:before{-webkit-animation-delay:-.9s;animation-delay:-.9s}.sk-fading-circle .sk-circle5:before{-webkit-animation-delay:-.8s;animation-delay:-.8s}.sk-fading-circle .sk-circle6:before{-webkit-animation-delay:-.7s;animation-delay:-.7s}.sk-fading-circle .sk-circle7:before{-webkit-animation-delay:-.6s;animation-delay:-.6s}.sk-fading-circle .sk-circle8:before{-webkit-animation-delay:-.5s;animation-delay:-.5s}.sk-fading-circle .sk-circle9:before{-webkit-animation-delay:-.4s;animation-delay:-.4s}.sk-fading-circle .sk-circle10:before{-webkit-animation-delay:-.3s;animation-delay:-.3s}.sk-fading-circle .sk-circle11:before{-webkit-animation-delay:-.2s;animation-delay:-.2s}.sk-fading-circle .sk-circle12:before{-webkit-animation-delay:-.1s;animation-delay:-.1s}@-webkit-keyframes sk-circleFadeDelay{0%,100%,39%{opacity:0}40%{opacity:1}}@keyframes sk-circleFadeDelay{0%,100%,39%{opacity:0}40%{opacity:1}}\"]\n    }]\n  }], function () {\n    return [{\n      type: Renderer\n    }, {\n      type: ImageUploaderService\n    }, {\n      type: ɵngcc0.ChangeDetectorRef\n    }];\n  }, {\n    upload: [{\n      type: Output\n    }],\n    statusChange: [{\n      type: Output\n    }],\n\n    /**\n     * @param {?} e\n     * @return {?}\n     */\n    drop: [{\n      type: HostListener,\n      args: ['drop', ['$event']]\n    }],\n\n    /**\n     * @param {?} e\n     * @return {?}\n     */\n    dragenter: [{\n      type: HostListener,\n      args: ['dragenter', ['$event']]\n    }],\n\n    /**\n     * @param {?} e\n     * @return {?}\n     */\n    dragover: [{\n      type: HostListener,\n      args: ['dragover', ['$event']]\n    }],\n\n    /**\n     * @param {?} e\n     * @return {?}\n     */\n    dragleave: [{\n      type: HostListener,\n      args: ['dragleave', ['$event']]\n    }],\n    imageElement: [{\n      type: ViewChild,\n      args: ['imageElement']\n    }],\n    fileInputElement: [{\n      type: ViewChild,\n      args: ['fileInput']\n    }],\n    dragOverlayElement: [{\n      type: ViewChild,\n      args: ['dragOverlay']\n    }],\n    options: [{\n      type: Input\n    }]\n  });\n})();\n/**\r\n * @fileoverview added by tsickle\r\n * @suppress {checkTypes} checked by tsc\r\n */\n\n\nclass ImageUploaderModule {}\n\nImageUploaderModule.ɵfac = function ImageUploaderModule_Factory(t) {\n  return new (t || ImageUploaderModule)();\n};\n\nImageUploaderModule.ɵmod = /*@__PURE__*/ɵngcc0.ɵɵdefineNgModule({\n  type: ImageUploaderModule\n});\nImageUploaderModule.ɵinj = /*@__PURE__*/ɵngcc0.ɵɵdefineInjector({\n  imports: [CommonModule, HttpClientModule]\n});\n\n(function () {\n  (typeof ngDevMode === \"undefined\" || ngDevMode) && ɵngcc0.ɵsetClassMetadata(ImageUploaderModule, [{\n    type: NgModule,\n    args: [{\n      imports: [CommonModule, HttpClientModule],\n      declarations: [ImageUploaderComponent],\n      exports: [ImageUploaderComponent]\n    }]\n  }], null, null);\n})();\n\n(function () {\n  (typeof ngJitMode === \"undefined\" || ngJitMode) && ɵngcc0.ɵɵsetNgModuleScope(ImageUploaderModule, {\n    declarations: function () {\n      return [ImageUploaderComponent];\n    },\n    imports: function () {\n      return [CommonModule, HttpClientModule];\n    },\n    exports: function () {\n      return [ImageUploaderComponent];\n    }\n  });\n})();\n/**\r\n * @fileoverview added by tsickle\r\n * @suppress {checkTypes} checked by tsc\r\n */\n\n/**\r\n * @fileoverview added by tsickle\r\n * @suppress {checkTypes} checked by tsc\r\n */\n\n\nexport { ImageUploaderService, Status, ImageUploaderComponent, ImageUploaderModule, FileQueueObject };","map":{"version":3,"names":["Observable","Injectable","NgModule","Component","ViewChild","Renderer","Input","Output","EventEmitter","ChangeDetectorRef","forwardRef","HostListener","defineInjectable","inject","HttpClient","HttpRequest","HttpEventType","HttpResponse","HttpHeaders","HttpClientModule","NG_VALUE_ACCESSOR","Cropper","CommonModule","ɵngcc0","ɵngcc1","ɵngcc2","_c0","_c1","_c2","ImageUploaderComponent_div_2_Template","rf","ctx","_r9","ɵɵgetCurrentView","ɵɵelementStart","ɵɵlistener","ImageUploaderComponent_div_2_Template_button_click_1_listener","ɵɵrestoreView","ctx_r8","ɵɵnextContext","ɵɵresetView","onImageClicked","ɵɵtext","ɵɵelementEnd","ImageUploaderComponent_div_3_Template","_r12","ɵɵelement","ImageUploaderComponent_div_3_Template_button_click_3_listener","ctx_r11","removeImage","ctx_r1","ɵɵadvance","ɵɵproperty","imageThumbnail","ɵɵsanitizeUrl","ImageUploaderComponent_div_4_Template","_r15","ImageUploaderComponent_div_4_Template_button_click_3_listener","ctx_r14","ctx_r2","ImageUploaderComponent_div_5_Template","_r17","ImageUploaderComponent_div_5_Template_img_click_1_listener","ctx_r16","ctx_r3","ɵɵattribute","ɵɵstyleProp","progress","ImageUploaderComponent_div_6_Template","ImageUploaderComponent_div_7_Template","_r19","ImageUploaderComponent_div_7_Template_button_click_5_listener","ctx_r18","dismissError","ctx_r5","ɵɵtextInterpolate","errorMessage","FileQueueStatus","Pending","Success","Error","Progress","FileQueueObject","constructor","file","status","request","response","isPending","isSuccess","isError","inProgress","isUploadable","ImageUploaderService","http","uploadFile","options","cropOptions","setDefaults","form","FormData","append","fieldName","name","x","toString","y","width","height","req","uploadUrl","reportProgress","withCredentials","headers","_buildHeaders","create","obs","queueObj","subscribe","event","type","UploadProgress","_uploadProgress","next","_uploadComplete","complete","err","error","_uploadFailed","getFile","url","observer","authToken","authTokenPrefix","get","responseType","res","File","customHeaders","Object","keys","forEach","key","Math","round","loaded","total","httpMethod","ɵfac","ImageUploaderService_Factory","t","ɵɵinject","ɵprov","ɵɵdefineInjectable","token","factory","providedIn","ctorParameters","ngInjectableDef","ngDevMode","ɵsetClassMetadata","args","createImage","cb","image","Image","onload","src","resizeAreaId","getResizeArea","resizeArea","document","getElementById","createElement","id","style","display","body","appendChild","resizeImage","origImage","resizeHeight","resizeWidth","resizeQuality","resizeType","resizeMode","canvas","offsetX","offsetY","getContext","drawImage","toDataURL","Status","NotSelected","Selected","Uploading","Loading","Loaded","ImageUploaderComponent","renderer","uploader","changeDetector","statusEnum","_status","thumbnailWidth","thumbnailHeight","cropper","undefined","upload","statusChange","propagateChange","_","_imageThumbnail","value","_errorMessage","emit","writeValue","loadAndResize","registerOnChange","fn","registerOnTouched","ngOnInit","resizeOnLoad","autoUpload","cropEnabled","ngAfterViewChecked","imageElement","fileToUpload","nativeElement","viewMode","aspectRatio","cropAspectRatio","ngOnDestroy","destroy","result","URL","createObjectURL","resize","then","r","resized","dataURL","fileToDataURL","invokeElementMethod","fileInputElement","onFileChanged","files","validateAndUpload","allowedImageTypes","some","allowedType","join","maxImageSize","size","uploadImage","origImageWidth","orgiImageHeight","scale","getImageData","naturalWidth","cropData","getData","statusText","detectChanges","drop","e","preventDefault","stopPropagation","dataTransfer","length","updateDragOverlayStyles","dragenter","dragover","dragleave","isDragOver","resizeOptions","thumbnailResizeMode","Promise","resolve","dataUrl","getType","match","reader","FileReader","readAsDataURL","ImageUploaderComponent_Factory","ɵɵdirectiveInject","ɵcmp","ɵɵdefineComponent","selectors","viewQuery","ImageUploaderComponent_Query","ɵɵviewQuery","_t","ɵɵqueryRefresh","ɵɵloadQuery","first","dragOverlayElement","hostVars","hostBindings","ImageUploaderComponent_HostBindings","ImageUploaderComponent_drop_HostBindingHandler","$event","ImageUploaderComponent_dragenter_HostBindingHandler","ImageUploaderComponent_dragover_HostBindingHandler","ImageUploaderComponent_dragleave_HostBindingHandler","inputs","outputs","features","ɵɵProvidersFeature","provide","useExisting","multi","decls","vars","consts","template","ImageUploaderComponent_Template","ɵɵtemplate","ImageUploaderComponent_Template_input_change_8_listener","dependencies","NgSwitch","NgSwitchCase","styles","propDecorators","selector","host","providers","ImageUploaderModule","ImageUploaderModule_Factory","ɵmod","ɵɵdefineNgModule","ɵinj","ɵɵdefineInjector","imports","declarations","exports","ngJitMode","ɵɵsetNgModuleScope"],"sources":["C:/Users/hasithau/Desktop/projects/amare-leasing-frontend/node_modules/ngx-image-uploader/__ivy_ngcc__/fesm2015/ngx-image-uploader.js"],"sourcesContent":["import { Observable } from 'rxjs';\nimport { Injectable, NgModule, Component, ViewChild, Renderer, Input, Output, EventEmitter, ChangeDetectorRef, forwardRef, HostListener, defineInjectable, inject } from '@angular/core';\nimport { HttpClient, HttpRequest, HttpEventType, HttpResponse, HttpHeaders, HttpClientModule } from '@angular/common/http';\nimport { NG_VALUE_ACCESSOR } from '@angular/forms';\nimport Cropper from 'cropperjs';\nimport { CommonModule } from '@angular/common';\n\n/**\r\n * @fileoverview added by tsickle\r\n * @suppress {checkTypes} checked by tsc\r\n */\r\n/** @enum {number} */\r\nimport * as ɵngcc0 from '@angular/core';\nimport * as ɵngcc1 from '@angular/common/http';\nimport * as ɵngcc2 from '@angular/common';\n\nconst _c0 = [\"imageElement\"];\nconst _c1 = [\"fileInput\"];\nconst _c2 = [\"dragOverlay\"];\nfunction ImageUploaderComponent_div_2_Template(rf, ctx) { if (rf & 1) {\n    const _r9 = ɵngcc0.ɵɵgetCurrentView();\n    ɵngcc0.ɵɵelementStart(0, \"div\", 9)(1, \"button\", 10);\n    ɵngcc0.ɵɵlistener(\"click\", function ImageUploaderComponent_div_2_Template_button_click_1_listener() { ɵngcc0.ɵɵrestoreView(_r9); const ctx_r8 = ɵngcc0.ɵɵnextContext(); return ɵngcc0.ɵɵresetView(ctx_r8.onImageClicked()); });\n    ɵngcc0.ɵɵelementStart(2, \"div\")(3, \"p\", 11);\n    ɵngcc0.ɵɵtext(4, \"+\");\n    ɵngcc0.ɵɵelementEnd();\n    ɵngcc0.ɵɵelementStart(5, \"p\");\n    ɵngcc0.ɵɵtext(6, \"Click here to add image\");\n    ɵngcc0.ɵɵelementEnd();\n    ɵngcc0.ɵɵelementStart(7, \"p\");\n    ɵngcc0.ɵɵtext(8, \"Or drop image here\");\n    ɵngcc0.ɵɵelementEnd()()()();\n} }\nfunction ImageUploaderComponent_div_3_Template(rf, ctx) { if (rf & 1) {\n    const _r12 = ɵngcc0.ɵɵgetCurrentView();\n    ɵngcc0.ɵɵelementStart(0, \"div\", 12);\n    ɵngcc0.ɵɵelement(1, \"img\", 13, 14);\n    ɵngcc0.ɵɵelementStart(3, \"button\", 15);\n    ɵngcc0.ɵɵlistener(\"click\", function ImageUploaderComponent_div_3_Template_button_click_3_listener() { ɵngcc0.ɵɵrestoreView(_r12); const ctx_r11 = ɵngcc0.ɵɵnextContext(); return ɵngcc0.ɵɵresetView(ctx_r11.removeImage()); });\n    ɵngcc0.ɵɵtext(4, \"\\u00D7\");\n    ɵngcc0.ɵɵelementEnd()();\n} if (rf & 2) {\n    const ctx_r1 = ɵngcc0.ɵɵnextContext();\n    ɵngcc0.ɵɵadvance(1);\n    ɵngcc0.ɵɵproperty(\"src\", ctx_r1.imageThumbnail, ɵngcc0.ɵɵsanitizeUrl);\n} }\nfunction ImageUploaderComponent_div_4_Template(rf, ctx) { if (rf & 1) {\n    const _r15 = ɵngcc0.ɵɵgetCurrentView();\n    ɵngcc0.ɵɵelementStart(0, \"div\", 12);\n    ɵngcc0.ɵɵelement(1, \"img\", 13, 14);\n    ɵngcc0.ɵɵelementStart(3, \"button\", 15);\n    ɵngcc0.ɵɵlistener(\"click\", function ImageUploaderComponent_div_4_Template_button_click_3_listener() { ɵngcc0.ɵɵrestoreView(_r15); const ctx_r14 = ɵngcc0.ɵɵnextContext(); return ɵngcc0.ɵɵresetView(ctx_r14.removeImage()); });\n    ɵngcc0.ɵɵtext(4, \"\\u00D7\");\n    ɵngcc0.ɵɵelementEnd()();\n} if (rf & 2) {\n    const ctx_r2 = ɵngcc0.ɵɵnextContext();\n    ɵngcc0.ɵɵadvance(1);\n    ɵngcc0.ɵɵproperty(\"src\", ctx_r2.imageThumbnail, ɵngcc0.ɵɵsanitizeUrl);\n} }\nfunction ImageUploaderComponent_div_5_Template(rf, ctx) { if (rf & 1) {\n    const _r17 = ɵngcc0.ɵɵgetCurrentView();\n    ɵngcc0.ɵɵelementStart(0, \"div\")(1, \"img\", 16);\n    ɵngcc0.ɵɵlistener(\"click\", function ImageUploaderComponent_div_5_Template_img_click_1_listener() { ɵngcc0.ɵɵrestoreView(_r17); const ctx_r16 = ɵngcc0.ɵɵnextContext(); return ɵngcc0.ɵɵresetView(ctx_r16.onImageClicked()); });\n    ɵngcc0.ɵɵelementEnd();\n    ɵngcc0.ɵɵelementStart(2, \"div\", 17);\n    ɵngcc0.ɵɵelement(3, \"div\", 18);\n    ɵngcc0.ɵɵelementEnd()();\n} if (rf & 2) {\n    const ctx_r3 = ɵngcc0.ɵɵnextContext();\n    ɵngcc0.ɵɵadvance(1);\n    ɵngcc0.ɵɵattribute(\"src\", ctx_r3.imageThumbnail ? ctx_r3.imageThumbnail : null, ɵngcc0.ɵɵsanitizeUrl);\n    ɵngcc0.ɵɵadvance(2);\n    ɵngcc0.ɵɵstyleProp(\"width\", ctx_r3.progress + \"%\");\n} }\nfunction ImageUploaderComponent_div_6_Template(rf, ctx) { if (rf & 1) {\n    ɵngcc0.ɵɵelementStart(0, \"div\", 9)(1, \"div\", 19);\n    ɵngcc0.ɵɵelement(2, \"div\", 20)(3, \"div\", 21)(4, \"div\", 22)(5, \"div\", 23)(6, \"div\", 24)(7, \"div\", 25)(8, \"div\", 26)(9, \"div\", 27)(10, \"div\", 28)(11, \"div\", 29)(12, \"div\", 30)(13, \"div\", 31);\n    ɵngcc0.ɵɵelementEnd()();\n} }\nfunction ImageUploaderComponent_div_7_Template(rf, ctx) { if (rf & 1) {\n    const _r19 = ɵngcc0.ɵɵgetCurrentView();\n    ɵngcc0.ɵɵelementStart(0, \"div\", 9)(1, \"div\", 32)(2, \"div\", 33)(3, \"p\");\n    ɵngcc0.ɵɵtext(4);\n    ɵngcc0.ɵɵelementEnd()();\n    ɵngcc0.ɵɵelementStart(5, \"button\", 15);\n    ɵngcc0.ɵɵlistener(\"click\", function ImageUploaderComponent_div_7_Template_button_click_5_listener() { ɵngcc0.ɵɵrestoreView(_r19); const ctx_r18 = ɵngcc0.ɵɵnextContext(); return ɵngcc0.ɵɵresetView(ctx_r18.dismissError()); });\n    ɵngcc0.ɵɵtext(6, \"\\u00D7\");\n    ɵngcc0.ɵɵelementEnd()()();\n} if (rf & 2) {\n    const ctx_r5 = ɵngcc0.ɵɵnextContext();\n    ɵngcc0.ɵɵadvance(4);\n    ɵngcc0.ɵɵtextInterpolate(ctx_r5.errorMessage);\n} }\nconst FileQueueStatus = {\r\n    Pending: 0,\r\n    Success: 1,\r\n    Error: 2,\r\n    Progress: 3,\r\n};\r\nFileQueueStatus[FileQueueStatus.Pending] = \"Pending\";\r\nFileQueueStatus[FileQueueStatus.Success] = \"Success\";\r\nFileQueueStatus[FileQueueStatus.Error] = \"Error\";\r\nFileQueueStatus[FileQueueStatus.Progress] = \"Progress\";\n\n/**\r\n * @fileoverview added by tsickle\r\n * @suppress {checkTypes} checked by tsc\r\n */\r\nclass FileQueueObject {\r\n    /**\r\n     * @param {?} file\r\n     */\r\n    constructor(file) {\r\n        this.status = FileQueueStatus.Pending;\r\n        this.progress = 0;\r\n        this.request = null;\r\n        this.response = null;\r\n        this.isPending = () => this.status === FileQueueStatus.Pending;\r\n        this.isSuccess = () => this.status === FileQueueStatus.Success;\r\n        this.isError = () => this.status === FileQueueStatus.Error;\r\n        this.inProgress = () => this.status === FileQueueStatus.Progress;\r\n        this.isUploadable = () => this.status === FileQueueStatus.Pending || this.status === FileQueueStatus.Error;\r\n        this.file = file;\r\n    }\r\n}\n\n/**\r\n * @fileoverview added by tsickle\r\n * @suppress {checkTypes} checked by tsc\r\n */\r\nclass ImageUploaderService {\r\n    /**\r\n     * @param {?} http\r\n     */\r\n    constructor(http) {\r\n        this.http = http;\r\n    }\r\n    /**\r\n     * @param {?} file\r\n     * @param {?} options\r\n     * @param {?=} cropOptions\r\n     * @return {?}\r\n     */\r\n    uploadFile(file, options, cropOptions) {\r\n        this.setDefaults(options);\r\n        const /** @type {?} */ form = new FormData();\r\n        form.append(options.fieldName, file, file.name);\r\n        if (cropOptions) {\r\n            form.append('X', cropOptions.x.toString());\r\n            form.append('Y', cropOptions.y.toString());\r\n            form.append('Width', cropOptions.width.toString());\r\n            form.append('Height', cropOptions.height.toString());\r\n        }\r\n        // upload file and report progress\r\n        const /** @type {?} */ req = new HttpRequest('POST', options.uploadUrl, form, {\r\n            reportProgress: true,\r\n            withCredentials: options.withCredentials,\r\n            headers: this._buildHeaders(options)\r\n        });\r\n        return Observable.create(obs => {\r\n            const /** @type {?} */ queueObj = new FileQueueObject(file);\r\n            queueObj.request = this.http.request(req).subscribe((event) => {\r\n                if (event.type === HttpEventType.UploadProgress) {\r\n                    this._uploadProgress(queueObj, event);\r\n                    obs.next(queueObj);\r\n                }\r\n                else if (event instanceof HttpResponse) {\r\n                    this._uploadComplete(queueObj, event);\r\n                    obs.next(queueObj);\r\n                    obs.complete();\r\n                }\r\n            }, (err) => {\r\n                if (err.error instanceof Error) {\r\n                    // A client-side or network error occurred. Handle it accordingly.\r\n                    this._uploadFailed(queueObj, err);\r\n                    obs.next(queueObj);\r\n                    obs.complete();\r\n                }\r\n                else {\r\n                    // The backend returned an unsuccessful response code.\r\n                    this._uploadFailed(queueObj, err);\r\n                    obs.next(queueObj);\r\n                    obs.complete();\r\n                }\r\n            });\r\n        });\r\n    }\r\n    /**\r\n     * @param {?} url\r\n     * @param {?} options\r\n     * @return {?}\r\n     */\r\n    getFile(url, options) {\r\n        return Observable.create((observer) => {\r\n            let /** @type {?} */ headers = new HttpHeaders();\r\n            if (options.authToken) {\r\n                headers = headers.append('Authorization', `${options.authTokenPrefix} ${options.authToken}`);\r\n            }\r\n            this.http.get(url, { responseType: 'blob', headers: headers }).subscribe(res => {\r\n                const /** @type {?} */ file = new File([res], 'filename', { type: res.type });\r\n                observer.next(file);\r\n                observer.complete();\r\n            }, err => {\r\n                observer.error(err.status);\r\n                observer.complete();\r\n            });\r\n        });\r\n    }\r\n    /**\r\n     * @param {?} options\r\n     * @return {?}\r\n     */\r\n    _buildHeaders(options) {\r\n        let /** @type {?} */ headers = new HttpHeaders();\r\n        if (options.authToken) {\r\n            headers = headers.append('Authorization', `${options.authTokenPrefix} ${options.authToken}`);\r\n        }\r\n        if (options.customHeaders) {\r\n            Object.keys(options.customHeaders).forEach((key) => {\r\n                headers = headers.append(key, options.customHeaders[key]);\r\n            });\r\n        }\r\n        return headers;\r\n    }\r\n    /**\r\n     * @param {?} queueObj\r\n     * @param {?} event\r\n     * @return {?}\r\n     */\r\n    _uploadProgress(queueObj, event) {\r\n        // update the FileQueueObject with the current progress\r\n        const /** @type {?} */ progress = Math.round(100 * event.loaded / event.total);\r\n        queueObj.progress = progress;\r\n        queueObj.status = FileQueueStatus.Progress;\r\n        // this._queue.next(this._files);\r\n    }\r\n    /**\r\n     * @param {?} queueObj\r\n     * @param {?} response\r\n     * @return {?}\r\n     */\r\n    _uploadComplete(queueObj, response) {\r\n        // update the FileQueueObject as completed\r\n        queueObj.progress = 100;\r\n        queueObj.status = FileQueueStatus.Success;\r\n        queueObj.response = response;\r\n        // this._queue.next(this._files);\r\n        // this.onCompleteItem(queueObj, response.body);\r\n    }\r\n    /**\r\n     * @param {?} queueObj\r\n     * @param {?} response\r\n     * @return {?}\r\n     */\r\n    _uploadFailed(queueObj, response) {\r\n        // update the FileQueueObject as errored\r\n        queueObj.progress = 0;\r\n        queueObj.status = FileQueueStatus.Error;\r\n        queueObj.response = response;\r\n        // this._queue.next(this._files);\r\n    }\r\n    /**\r\n     * @param {?} options\r\n     * @return {?}\r\n     */\r\n    setDefaults(options) {\r\n        options.withCredentials = options.withCredentials || false;\r\n        options.httpMethod = options.httpMethod || 'POST';\r\n        options.authTokenPrefix = options.authTokenPrefix || 'Bearer';\r\n        options.fieldName = options.fieldName || 'file';\r\n    }\r\n}\nImageUploaderService.ɵfac = function ImageUploaderService_Factory(t) { return new (t || ImageUploaderService)(ɵngcc0.ɵɵinject(ɵngcc1.HttpClient)); };\nImageUploaderService.ɵprov = /*@__PURE__*/ ɵngcc0.ɵɵdefineInjectable({ token: ImageUploaderService, factory: ImageUploaderService.ɵfac, providedIn: 'root' });\r\n/** @nocollapse */\r\nImageUploaderService.ctorParameters = () => [\r\n    { type: HttpClient, },\r\n];\r\n/** @nocollapse */ ImageUploaderService.ngInjectableDef = defineInjectable({ factory: function ImageUploaderService_Factory() { return new ImageUploaderService(inject(HttpClient)); }, token: ImageUploaderService, providedIn: \"root\" });\n(function () { (typeof ngDevMode === \"undefined\" || ngDevMode) && ɵngcc0.ɵsetClassMetadata(ImageUploaderService, [{\n        type: Injectable,\n        args: [{\n                providedIn: 'root'\n            }]\n    }], function () { return [{ type: ɵngcc1.HttpClient }]; }, null); })();\n\n/**\r\n * @fileoverview added by tsickle\r\n * @suppress {checkTypes} checked by tsc\r\n */\r\n/**\r\n * @param {?} url\r\n * @param {?} cb\r\n * @return {?}\r\n */\r\nfunction createImage(url, cb) {\r\n    const /** @type {?} */ image = new Image();\r\n    image.onload = function () {\r\n        cb(image);\r\n    };\r\n    image.src = url;\r\n}\r\nconst /** @type {?} */ resizeAreaId = 'imageupload-resize-area';\r\n/**\r\n * @return {?}\r\n */\r\nfunction getResizeArea() {\r\n    let /** @type {?} */ resizeArea = document.getElementById(resizeAreaId);\r\n    if (!resizeArea) {\r\n        resizeArea = document.createElement('canvas');\r\n        resizeArea.id = resizeAreaId;\r\n        resizeArea.style.display = 'none';\r\n        document.body.appendChild(resizeArea);\r\n    }\r\n    return /** @type {?} */ (resizeArea);\r\n}\r\n/**\r\n * @param {?} origImage\r\n * @param {?=} __1\r\n * @return {?}\r\n */\r\nfunction resizeImage(origImage, { resizeHeight, resizeWidth, resizeQuality = 0.7, resizeType = 'image/jpeg', resizeMode = 'fill' } = {}) {\r\n    const /** @type {?} */ canvas = getResizeArea();\r\n    let /** @type {?} */ height = origImage.height;\r\n    let /** @type {?} */ width = origImage.width;\r\n    let /** @type {?} */ offsetX = 0;\r\n    let /** @type {?} */ offsetY = 0;\r\n    if (resizeMode === 'fill') {\r\n        // calculate the width and height, constraining the proportions\r\n        if (width / height > resizeWidth / resizeHeight) {\r\n            width = Math.round(height * resizeWidth / resizeHeight);\r\n        }\r\n        else {\r\n            height = Math.round(width * resizeHeight / resizeWidth);\r\n        }\r\n        canvas.width = resizeWidth <= width ? resizeWidth : width;\r\n        canvas.height = resizeHeight <= height ? resizeHeight : height;\r\n        offsetX = origImage.width / 2 - width / 2;\r\n        offsetY = origImage.height / 2 - height / 2;\r\n        // draw image on canvas\r\n        const /** @type {?} */ ctx = canvas.getContext('2d');\r\n        ctx.drawImage(origImage, offsetX, offsetY, width, height, 0, 0, canvas.width, canvas.height);\r\n    }\r\n    else if (resizeMode === 'fit') {\r\n        // calculate the width and height, constraining the proportions\r\n        if (width > height) {\r\n            if (width > resizeWidth) {\r\n                height = Math.round(height *= resizeWidth / width);\r\n                width = resizeWidth;\r\n            }\r\n        }\r\n        else {\r\n            if (height > resizeHeight) {\r\n                width = Math.round(width *= resizeHeight / height);\r\n                height = resizeHeight;\r\n            }\r\n        }\r\n        canvas.width = width;\r\n        canvas.height = height;\r\n        // draw image on canvas\r\n        const /** @type {?} */ ctx = canvas.getContext('2d');\r\n        ctx.drawImage(origImage, 0, 0, width, height);\r\n    }\r\n    else {\r\n        throw new Error('Unknown resizeMode: ' + resizeMode);\r\n    }\r\n    // get the data from canvas as 70% jpg (or specified type).\r\n    return canvas.toDataURL(resizeType, resizeQuality);\r\n}\n\n/**\r\n * @fileoverview added by tsickle\r\n * @suppress {checkTypes} checked by tsc\r\n */\r\n/** @enum {number} */\r\nconst Status = {\r\n    NotSelected: 0,\r\n    Selected: 1,\r\n    Uploading: 2,\r\n    Loading: 3,\r\n    Loaded: 4,\r\n    Error: 5,\r\n};\r\nStatus[Status.NotSelected] = \"NotSelected\";\r\nStatus[Status.Selected] = \"Selected\";\r\nStatus[Status.Uploading] = \"Uploading\";\r\nStatus[Status.Loading] = \"Loading\";\r\nStatus[Status.Loaded] = \"Loaded\";\r\nStatus[Status.Error] = \"Error\";\r\nclass ImageUploaderComponent {\r\n    /**\r\n     * @param {?} renderer\r\n     * @param {?} uploader\r\n     * @param {?} changeDetector\r\n     */\r\n    constructor(renderer, uploader, changeDetector) {\r\n        this.renderer = renderer;\r\n        this.uploader = uploader;\r\n        this.changeDetector = changeDetector;\r\n        this.statusEnum = Status;\r\n        this._status = Status.NotSelected;\r\n        this.thumbnailWidth = 150;\r\n        this.thumbnailHeight = 150;\r\n        this.cropper = undefined;\r\n        this.upload = new EventEmitter();\r\n        this.statusChange = new EventEmitter();\r\n        this.propagateChange = (_) => { };\r\n    }\r\n    /**\r\n     * @return {?}\r\n     */\r\n    get imageThumbnail() {\r\n        return this._imageThumbnail;\r\n    }\r\n    /**\r\n     * @param {?} value\r\n     * @return {?}\r\n     */\r\n    set imageThumbnail(value) {\r\n        this._imageThumbnail = value;\r\n        this.propagateChange(this._imageThumbnail);\r\n        if (value !== undefined) {\r\n            this.status = Status.Selected;\r\n        }\r\n        else {\r\n            this.status = Status.NotSelected;\r\n        }\r\n    }\r\n    /**\r\n     * @return {?}\r\n     */\r\n    get errorMessage() {\r\n        return this._errorMessage;\r\n    }\r\n    /**\r\n     * @param {?} value\r\n     * @return {?}\r\n     */\r\n    set errorMessage(value) {\r\n        this._errorMessage = value;\r\n        if (value) {\r\n            this.status = Status.Error;\r\n        }\r\n        else {\r\n            this.status = Status.NotSelected;\r\n        }\r\n    }\r\n    /**\r\n     * @return {?}\r\n     */\r\n    get status() {\r\n        return this._status;\r\n    }\r\n    /**\r\n     * @param {?} value\r\n     * @return {?}\r\n     */\r\n    set status(value) {\r\n        this._status = value;\r\n        this.statusChange.emit(value);\r\n    }\r\n    /**\r\n     * @param {?} value\r\n     * @return {?}\r\n     */\r\n    writeValue(value) {\r\n        if (value) {\r\n            this.loadAndResize(value);\r\n        }\r\n        else {\r\n            this._imageThumbnail = undefined;\r\n            this.status = Status.NotSelected;\r\n        }\r\n    }\r\n    /**\r\n     * @param {?} fn\r\n     * @return {?}\r\n     */\r\n    registerOnChange(fn) {\r\n        this.propagateChange = fn;\r\n    }\r\n    /**\r\n     * @return {?}\r\n     */\r\n    registerOnTouched() { }\r\n    /**\r\n     * @return {?}\r\n     */\r\n    ngOnInit() {\r\n        if (this.options) {\r\n            if (this.options.thumbnailWidth) {\r\n                this.thumbnailWidth = this.options.thumbnailWidth;\r\n            }\r\n            if (this.options.thumbnailHeight) {\r\n                this.thumbnailHeight = this.options.thumbnailHeight;\r\n            }\r\n            if (this.options.resizeOnLoad === undefined) {\r\n                this.options.resizeOnLoad = true;\r\n            }\r\n            if (this.options.autoUpload === undefined) {\r\n                this.options.autoUpload = true;\r\n            }\r\n            if (this.options.cropEnabled === undefined) {\r\n                this.options.cropEnabled = false;\r\n            }\r\n            if (this.options.autoUpload && this.options.cropEnabled) {\r\n                throw new Error('autoUpload and cropEnabled cannot be enabled simultaneously');\r\n            }\r\n        }\r\n    }\r\n    /**\r\n     * @return {?}\r\n     */\r\n    ngAfterViewChecked() {\r\n        if (this.options && this.options.cropEnabled && this.imageElement && this.fileToUpload && !this.cropper) {\r\n            this.cropper = new Cropper(this.imageElement.nativeElement, {\r\n                viewMode: 1,\r\n                aspectRatio: this.options.cropAspectRatio ? this.options.cropAspectRatio : null\r\n            });\r\n        }\r\n    }\r\n    /**\r\n     * @return {?}\r\n     */\r\n    ngOnDestroy() {\r\n        if (this.cropper) {\r\n            this.cropper.destroy();\r\n            this.cropper = null;\r\n        }\r\n    }\r\n    /**\r\n     * @param {?} url\r\n     * @return {?}\r\n     */\r\n    loadAndResize(url) {\r\n        this.status = Status.Loading;\r\n        this.uploader.getFile(url, this.options).subscribe(file => {\r\n            if (this.options.resizeOnLoad) {\r\n                // thumbnail\r\n                const /** @type {?} */ result = {\r\n                    file: file,\r\n                    url: URL.createObjectURL(file)\r\n                };\r\n                this.resize(result).then(r => {\r\n                    this._imageThumbnail = r.resized.dataURL;\r\n                    this.status = Status.Loaded;\r\n                });\r\n            }\r\n            else {\r\n                const /** @type {?} */ result = {\r\n                    file: null,\r\n                    url: null\r\n                };\r\n                this.fileToDataURL(file, result).then(r => {\r\n                    this._imageThumbnail = r.dataURL;\r\n                    this.status = Status.Loaded;\r\n                });\r\n            }\r\n        }, error => {\r\n            this.errorMessage = error || 'Error while getting an image';\r\n        });\r\n    }\r\n    /**\r\n     * @return {?}\r\n     */\r\n    onImageClicked() {\r\n        this.renderer.invokeElementMethod(this.fileInputElement.nativeElement, 'click');\r\n    }\r\n    /**\r\n     * @return {?}\r\n     */\r\n    onFileChanged() {\r\n        const /** @type {?} */ file = this.fileInputElement.nativeElement.files[0];\r\n        if (!file) {\r\n            return;\r\n        }\r\n        this.validateAndUpload(file);\r\n    }\r\n    /**\r\n     * @param {?} file\r\n     * @return {?}\r\n     */\r\n    validateAndUpload(file) {\r\n        this.propagateChange(null);\r\n        if (this.options && this.options.allowedImageTypes) {\r\n            if (!this.options.allowedImageTypes.some(allowedType => file.type === allowedType)) {\r\n                this.errorMessage = 'Only these image types are allowed: ' + this.options.allowedImageTypes.join(', ');\r\n                return;\r\n            }\r\n        }\r\n        if (this.options && this.options.maxImageSize) {\r\n            if (file.size > this.options.maxImageSize * 1024 * 1024) {\r\n                this.errorMessage = `Image must not be larger than ${this.options.maxImageSize} MB`;\r\n                return;\r\n            }\r\n        }\r\n        this.fileToUpload = file;\r\n        if (this.options && this.options.autoUpload) {\r\n            this.uploadImage();\r\n        }\r\n        // thumbnail\r\n        const /** @type {?} */ result = {\r\n            file: file,\r\n            url: URL.createObjectURL(file)\r\n        };\r\n        this.resize(result).then(r => {\r\n            this._imageThumbnail = r.resized.dataURL;\r\n            this.origImageWidth = r.width;\r\n            this.orgiImageHeight = r.height;\r\n            if (this.options && !this.options.autoUpload) {\r\n                this.status = Status.Selected;\r\n            }\r\n        });\r\n    }\r\n    /**\r\n     * @return {?}\r\n     */\r\n    uploadImage() {\r\n        this.progress = 0;\r\n        this.status = Status.Uploading;\r\n        let /** @type {?} */ cropOptions;\r\n        if (this.cropper) {\r\n            const /** @type {?} */ scale = this.origImageWidth / this.cropper.getImageData().naturalWidth;\r\n            const /** @type {?} */ cropData = this.cropper.getData();\r\n            cropOptions = {\r\n                x: Math.round(cropData.x * scale),\r\n                y: Math.round(cropData.y * scale),\r\n                width: Math.round(cropData.width * scale),\r\n                height: Math.round(cropData.height * scale)\r\n            };\r\n        }\r\n        // const queueObj = this.uploader.uploadFile(this.fileToUpload, this.options, cropOptions);\r\n        // file progress\r\n        this.uploader.uploadFile(this.fileToUpload, this.options, cropOptions).subscribe(file => {\r\n            this.progress = file.progress;\r\n            if (file.isError()) {\r\n                if (file.response.status || file.response.statusText) {\r\n                    this.errorMessage = `${file.response.status}: ${file.response.statusText}`;\r\n                }\r\n                else {\r\n                    this.errorMessage = 'Error while uploading';\r\n                }\r\n                // on some upload errors change detection does not work, so we are forcing manually\r\n                this.changeDetector.detectChanges();\r\n            }\r\n            if (!file.inProgress()) {\r\n                // notify that value was changed only when image was uploaded and no error\r\n                if (file.isSuccess()) {\r\n                    this.propagateChange(this._imageThumbnail);\r\n                    this.status = Status.Selected;\r\n                    this.fileToUpload = undefined;\r\n                }\r\n                this.upload.emit(file);\r\n            }\r\n        });\r\n    }\r\n    /**\r\n     * @return {?}\r\n     */\r\n    removeImage() {\r\n        this.fileInputElement.nativeElement.value = null;\r\n        this.imageThumbnail = undefined;\r\n        if (this.cropper) {\r\n            this.cropper.destroy();\r\n            this.cropper = null;\r\n        }\r\n    }\r\n    /**\r\n     * @return {?}\r\n     */\r\n    dismissError() {\r\n        this.errorMessage = undefined;\r\n        this.removeImage();\r\n    }\r\n    /**\r\n     * @param {?} e\r\n     * @return {?}\r\n     */\r\n    drop(e) {\r\n        e.preventDefault();\r\n        e.stopPropagation();\r\n        if (!e.dataTransfer || !e.dataTransfer.files.length) {\r\n            return;\r\n        }\r\n        this.validateAndUpload(e.dataTransfer.files[0]);\r\n        this.updateDragOverlayStyles(false);\r\n    }\r\n    /**\r\n     * @param {?} e\r\n     * @return {?}\r\n     */\r\n    dragenter(e) {\r\n        e.preventDefault();\r\n        e.stopPropagation();\r\n    }\r\n    /**\r\n     * @param {?} e\r\n     * @return {?}\r\n     */\r\n    dragover(e) {\r\n        e.preventDefault();\r\n        e.stopPropagation();\r\n        this.updateDragOverlayStyles(true);\r\n    }\r\n    /**\r\n     * @param {?} e\r\n     * @return {?}\r\n     */\r\n    dragleave(e) {\r\n        e.preventDefault();\r\n        e.stopPropagation();\r\n        this.updateDragOverlayStyles(false);\r\n    }\r\n    /**\r\n     * @param {?} isDragOver\r\n     * @return {?}\r\n     */\r\n    updateDragOverlayStyles(isDragOver) {\r\n        // TODO: find a way that does not trigger dragleave when displaying overlay\r\n        // if (isDragOver) {\r\n        //  this.renderer.setElementStyle(this.dragOverlayElement.nativeElement, 'display', 'block');\r\n        // } else {\r\n        //  this.renderer.setElementStyle(this.dragOverlayElement.nativeElement, 'display', 'none');\r\n        // }\r\n    }\r\n    /**\r\n     * @param {?} result\r\n     * @return {?}\r\n     */\r\n    resize(result) {\r\n        const /** @type {?} */ resizeOptions = {\r\n            resizeHeight: this.thumbnailHeight,\r\n            resizeWidth: this.thumbnailWidth,\r\n            resizeType: result.file.type,\r\n            resizeMode: this.options.thumbnailResizeMode\r\n        };\r\n        return new Promise((resolve) => {\r\n            createImage(result.url, image => {\r\n                const /** @type {?} */ dataUrl = resizeImage(image, resizeOptions);\r\n                result.width = image.width;\r\n                result.height = image.height;\r\n                result.resized = {\r\n                    dataURL: dataUrl,\r\n                    type: this.getType(dataUrl)\r\n                };\r\n                resolve(result);\r\n            });\r\n        });\r\n    }\r\n    /**\r\n     * @param {?} dataUrl\r\n     * @return {?}\r\n     */\r\n    getType(dataUrl) {\r\n        return dataUrl.match(/:(.+\\/.+;)/)[1];\r\n    }\r\n    /**\r\n     * @param {?} file\r\n     * @param {?} result\r\n     * @return {?}\r\n     */\r\n    fileToDataURL(file, result) {\r\n        return new Promise((resolve) => {\r\n            const /** @type {?} */ reader = new FileReader();\r\n            reader.onload = function (e) {\r\n                result.dataURL = reader.result;\r\n                resolve(result);\r\n            };\r\n            reader.readAsDataURL(file);\r\n        });\r\n    }\r\n}\nImageUploaderComponent.ɵfac = function ImageUploaderComponent_Factory(t) { return new (t || ImageUploaderComponent)(ɵngcc0.ɵɵdirectiveInject(Renderer), ɵngcc0.ɵɵdirectiveInject(ImageUploaderService), ɵngcc0.ɵɵdirectiveInject(ɵngcc0.ChangeDetectorRef)); };\nImageUploaderComponent.ɵcmp = /*@__PURE__*/ ɵngcc0.ɵɵdefineComponent({ type: ImageUploaderComponent, selectors: [[\"ngx-image-uploader\"]], viewQuery: function ImageUploaderComponent_Query(rf, ctx) { if (rf & 1) {\n        ɵngcc0.ɵɵviewQuery(_c0, 5);\n        ɵngcc0.ɵɵviewQuery(_c1, 5);\n        ɵngcc0.ɵɵviewQuery(_c2, 5);\n    } if (rf & 2) {\n        let _t;\n        ɵngcc0.ɵɵqueryRefresh(_t = ɵngcc0.ɵɵloadQuery()) && (ctx.imageElement = _t.first);\n        ɵngcc0.ɵɵqueryRefresh(_t = ɵngcc0.ɵɵloadQuery()) && (ctx.fileInputElement = _t.first);\n        ɵngcc0.ɵɵqueryRefresh(_t = ɵngcc0.ɵɵloadQuery()) && (ctx.dragOverlayElement = _t.first);\n    } }, hostVars: 4, hostBindings: function ImageUploaderComponent_HostBindings(rf, ctx) { if (rf & 1) {\n        ɵngcc0.ɵɵlistener(\"drop\", function ImageUploaderComponent_drop_HostBindingHandler($event) { return ctx.drop($event); })(\"dragenter\", function ImageUploaderComponent_dragenter_HostBindingHandler($event) { return ctx.dragenter($event); })(\"dragover\", function ImageUploaderComponent_dragover_HostBindingHandler($event) { return ctx.dragover($event); })(\"dragleave\", function ImageUploaderComponent_dragleave_HostBindingHandler($event) { return ctx.dragleave($event); });\n    } if (rf & 2) {\n        ɵngcc0.ɵɵstyleProp(\"width\", ctx.thumbnailWidth + \"px\")(\"height\", ctx.thumbnailHeight + \"px\");\n    } }, inputs: { options: \"options\" }, outputs: { upload: \"upload\", statusChange: \"statusChange\" }, features: [ɵngcc0.ɵɵProvidersFeature([\n            {\n                provide: NG_VALUE_ACCESSOR,\n                useExisting: forwardRef(() => ImageUploaderComponent),\n                multi: true\n            }\n        ])], decls: 12, vars: 8, consts: [[1, \"image-container\"], [1, \"match-parent\", 3, \"ngSwitch\"], [\"class\", \"match-parent\", 4, \"ngSwitchCase\"], [\"class\", \"selected-status-wrapper match-parent\", 4, \"ngSwitchCase\"], [4, \"ngSwitchCase\"], [\"type\", \"file\", 3, \"change\"], [\"fileInput\", \"\"], [1, \"drag-overlay\", 3, \"hidden\"], [\"dragOverlay\", \"\"], [1, \"match-parent\"], [\"type\", \"button\", 1, \"add-image-btn\", 3, \"click\"], [1, \"plus\"], [1, \"selected-status-wrapper\", \"match-parent\"], [3, \"src\"], [\"imageElement\", \"\"], [\"type\", \"button\", 1, \"remove\", 3, \"click\"], [3, \"click\"], [1, \"progress-bar\"], [1, \"bar\"], [1, \"sk-fading-circle\"], [1, \"sk-circle1\", \"sk-circle\"], [1, \"sk-circle2\", \"sk-circle\"], [1, \"sk-circle3\", \"sk-circle\"], [1, \"sk-circle4\", \"sk-circle\"], [1, \"sk-circle5\", \"sk-circle\"], [1, \"sk-circle6\", \"sk-circle\"], [1, \"sk-circle7\", \"sk-circle\"], [1, \"sk-circle8\", \"sk-circle\"], [1, \"sk-circle9\", \"sk-circle\"], [1, \"sk-circle10\", \"sk-circle\"], [1, \"sk-circle11\", \"sk-circle\"], [1, \"sk-circle12\", \"sk-circle\"], [1, \"error\"], [1, \"error-message\"]], template: function ImageUploaderComponent_Template(rf, ctx) { if (rf & 1) {\n        ɵngcc0.ɵɵelementStart(0, \"div\", 0)(1, \"div\", 1);\n        ɵngcc0.ɵɵtemplate(2, ImageUploaderComponent_div_2_Template, 9, 0, \"div\", 2);\n        ɵngcc0.ɵɵtemplate(3, ImageUploaderComponent_div_3_Template, 5, 1, \"div\", 3);\n        ɵngcc0.ɵɵtemplate(4, ImageUploaderComponent_div_4_Template, 5, 1, \"div\", 3);\n        ɵngcc0.ɵɵtemplate(5, ImageUploaderComponent_div_5_Template, 4, 3, \"div\", 4);\n        ɵngcc0.ɵɵtemplate(6, ImageUploaderComponent_div_6_Template, 14, 0, \"div\", 2);\n        ɵngcc0.ɵɵtemplate(7, ImageUploaderComponent_div_7_Template, 7, 1, \"div\", 2);\n        ɵngcc0.ɵɵelementEnd();\n        ɵngcc0.ɵɵelementStart(8, \"input\", 5, 6);\n        ɵngcc0.ɵɵlistener(\"change\", function ImageUploaderComponent_Template_input_change_8_listener() { return ctx.onFileChanged(); });\n        ɵngcc0.ɵɵelementEnd();\n        ɵngcc0.ɵɵelement(10, \"div\", 7, 8);\n        ɵngcc0.ɵɵelementEnd();\n    } if (rf & 2) {\n        ɵngcc0.ɵɵadvance(1);\n        ɵngcc0.ɵɵproperty(\"ngSwitch\", ctx.status);\n        ɵngcc0.ɵɵadvance(1);\n        ɵngcc0.ɵɵproperty(\"ngSwitchCase\", ctx.statusEnum.NotSelected);\n        ɵngcc0.ɵɵadvance(1);\n        ɵngcc0.ɵɵproperty(\"ngSwitchCase\", ctx.statusEnum.Loaded);\n        ɵngcc0.ɵɵadvance(1);\n        ɵngcc0.ɵɵproperty(\"ngSwitchCase\", ctx.statusEnum.Selected);\n        ɵngcc0.ɵɵadvance(1);\n        ɵngcc0.ɵɵproperty(\"ngSwitchCase\", ctx.statusEnum.Uploading);\n        ɵngcc0.ɵɵadvance(1);\n        ɵngcc0.ɵɵproperty(\"ngSwitchCase\", ctx.statusEnum.Loading);\n        ɵngcc0.ɵɵadvance(1);\n        ɵngcc0.ɵɵproperty(\"ngSwitchCase\", ctx.statusEnum.Error);\n        ɵngcc0.ɵɵadvance(3);\n        ɵngcc0.ɵɵproperty(\"hidden\", true);\n    } }, dependencies: [ɵngcc2.NgSwitch, ɵngcc2.NgSwitchCase], styles: [\"[_nghost-%COMP%]{display:block}.match-parent[_ngcontent-%COMP%]{width:100%;height:100%}.add-image-btn[_ngcontent-%COMP%]{width:100%;height:100%;font-weight:700;opacity:.5;border:0}.add-image-btn[_ngcontent-%COMP%]:hover{opacity:.7;cursor:pointer;background-color:#ddd;box-shadow:inset 0 0 5px rgba(0,0,0,.3)}.add-image-btn[_ngcontent-%COMP%]   .plus[_ngcontent-%COMP%]{font-size:30px;font-weight:400;margin-bottom:5px;margin-top:5px}img[_ngcontent-%COMP%]{cursor:pointer;position:absolute;top:50%;left:50%;margin-right:-50%;-webkit-transform:translate(-50%,-50%);transform:translate(-50%,-50%);max-width:100%}.image-container[_ngcontent-%COMP%]{width:100%;height:100%;position:relative;display:inline-block;background-color:#f1f1f1;box-shadow:inset 0 0 5px rgba(0,0,0,.2)}.remove[_ngcontent-%COMP%]{position:absolute;top:0;right:0;width:40px;height:40px;font-size:25px;text-align:center;opacity:.8;border:0;cursor:pointer}.selected-status-wrapper[_ngcontent-%COMP%] > .remove[_ngcontent-%COMP%]:hover{opacity:.7;background-color:#fff}.error[_ngcontent-%COMP%]   .remove[_ngcontent-%COMP%]{opacity:.5}.error[_ngcontent-%COMP%]   .remove[_ngcontent-%COMP%]:hover{opacity:.7}input[_ngcontent-%COMP%]{display:none}.error[_ngcontent-%COMP%]{width:100%;height:100%;border:1px solid #e3a5a2;color:#d2706b;background-color:#fbf1f0;position:relative;text-align:center;display:flex;align-items:center}.error-message[_ngcontent-%COMP%]{width:100%;line-height:18px}.progress-bar[_ngcontent-%COMP%]{position:absolute;bottom:10%;left:10%;width:80%;height:5px;background-color:grey;opacity:.9;overflow:hidden}.bar[_ngcontent-%COMP%]{position:absolute;height:100%;background-color:#a4c639}.drag-overlay[_ngcontent-%COMP%]{position:absolute;top:0;left:0;width:100%;height:100%;background-color:#ff0;opacity:.3}.sk-fading-circle[_ngcontent-%COMP%]{width:40px;height:40px;position:relative;top:50%;left:50%;-webkit-transform:translate(-50%,-50%);transform:translate(-50%,-50%)}.sk-fading-circle[_ngcontent-%COMP%]   .sk-circle[_ngcontent-%COMP%]{width:100%;height:100%;position:absolute;left:0;top:0}.sk-fading-circle[_ngcontent-%COMP%]   .sk-circle[_ngcontent-%COMP%]:before{content:'';display:block;margin:0 auto;width:15%;height:15%;background-color:#333;border-radius:100%;-webkit-animation:1.2s ease-in-out infinite both sk-circleFadeDelay;animation:1.2s ease-in-out infinite both sk-circleFadeDelay}.sk-fading-circle[_ngcontent-%COMP%]   .sk-circle2[_ngcontent-%COMP%]{-webkit-transform:rotate(30deg);transform:rotate(30deg)}.sk-fading-circle[_ngcontent-%COMP%]   .sk-circle3[_ngcontent-%COMP%]{-webkit-transform:rotate(60deg);transform:rotate(60deg)}.sk-fading-circle[_ngcontent-%COMP%]   .sk-circle4[_ngcontent-%COMP%]{-webkit-transform:rotate(90deg);transform:rotate(90deg)}.sk-fading-circle[_ngcontent-%COMP%]   .sk-circle5[_ngcontent-%COMP%]{-webkit-transform:rotate(120deg);transform:rotate(120deg)}.sk-fading-circle[_ngcontent-%COMP%]   .sk-circle6[_ngcontent-%COMP%]{-webkit-transform:rotate(150deg);transform:rotate(150deg)}.sk-fading-circle[_ngcontent-%COMP%]   .sk-circle7[_ngcontent-%COMP%]{-webkit-transform:rotate(180deg);transform:rotate(180deg)}.sk-fading-circle[_ngcontent-%COMP%]   .sk-circle8[_ngcontent-%COMP%]{-webkit-transform:rotate(210deg);transform:rotate(210deg)}.sk-fading-circle[_ngcontent-%COMP%]   .sk-circle9[_ngcontent-%COMP%]{-webkit-transform:rotate(240deg);transform:rotate(240deg)}.sk-fading-circle[_ngcontent-%COMP%]   .sk-circle10[_ngcontent-%COMP%]{-webkit-transform:rotate(270deg);transform:rotate(270deg)}.sk-fading-circle[_ngcontent-%COMP%]   .sk-circle11[_ngcontent-%COMP%]{-webkit-transform:rotate(300deg);transform:rotate(300deg)}.sk-fading-circle[_ngcontent-%COMP%]   .sk-circle12[_ngcontent-%COMP%]{-webkit-transform:rotate(330deg);transform:rotate(330deg)}.sk-fading-circle[_ngcontent-%COMP%]   .sk-circle2[_ngcontent-%COMP%]:before{-webkit-animation-delay:-1.1s;animation-delay:-1.1s}.sk-fading-circle[_ngcontent-%COMP%]   .sk-circle3[_ngcontent-%COMP%]:before{-webkit-animation-delay:-1s;animation-delay:-1s}.sk-fading-circle[_ngcontent-%COMP%]   .sk-circle4[_ngcontent-%COMP%]:before{-webkit-animation-delay:-.9s;animation-delay:-.9s}.sk-fading-circle[_ngcontent-%COMP%]   .sk-circle5[_ngcontent-%COMP%]:before{-webkit-animation-delay:-.8s;animation-delay:-.8s}.sk-fading-circle[_ngcontent-%COMP%]   .sk-circle6[_ngcontent-%COMP%]:before{-webkit-animation-delay:-.7s;animation-delay:-.7s}.sk-fading-circle[_ngcontent-%COMP%]   .sk-circle7[_ngcontent-%COMP%]:before{-webkit-animation-delay:-.6s;animation-delay:-.6s}.sk-fading-circle[_ngcontent-%COMP%]   .sk-circle8[_ngcontent-%COMP%]:before{-webkit-animation-delay:-.5s;animation-delay:-.5s}.sk-fading-circle[_ngcontent-%COMP%]   .sk-circle9[_ngcontent-%COMP%]:before{-webkit-animation-delay:-.4s;animation-delay:-.4s}.sk-fading-circle[_ngcontent-%COMP%]   .sk-circle10[_ngcontent-%COMP%]:before{-webkit-animation-delay:-.3s;animation-delay:-.3s}.sk-fading-circle[_ngcontent-%COMP%]   .sk-circle11[_ngcontent-%COMP%]:before{-webkit-animation-delay:-.2s;animation-delay:-.2s}.sk-fading-circle[_ngcontent-%COMP%]   .sk-circle12[_ngcontent-%COMP%]:before{-webkit-animation-delay:-.1s;animation-delay:-.1s}@-webkit-keyframes sk-circleFadeDelay{0%,100%,39%{opacity:0}40%{opacity:1}}@keyframes sk-circleFadeDelay{0%,100%,39%{opacity:0}40%{opacity:1}}\"] });\r\n/** @nocollapse */\r\nImageUploaderComponent.ctorParameters = () => [\r\n    { type: Renderer, },\r\n    { type: ImageUploaderService, },\r\n    { type: ChangeDetectorRef, },\r\n];\r\nImageUploaderComponent.propDecorators = {\r\n    \"imageElement\": [{ type: ViewChild, args: ['imageElement',] },],\r\n    \"fileInputElement\": [{ type: ViewChild, args: ['fileInput',] },],\r\n    \"dragOverlayElement\": [{ type: ViewChild, args: ['dragOverlay',] },],\r\n    \"options\": [{ type: Input },],\r\n    \"upload\": [{ type: Output },],\r\n    \"statusChange\": [{ type: Output },],\r\n    \"drop\": [{ type: HostListener, args: ['drop', ['$event'],] },],\r\n    \"dragenter\": [{ type: HostListener, args: ['dragenter', ['$event'],] },],\r\n    \"dragover\": [{ type: HostListener, args: ['dragover', ['$event'],] },],\r\n    \"dragleave\": [{ type: HostListener, args: ['dragleave', ['$event'],] },],\r\n};\n(function () { (typeof ngDevMode === \"undefined\" || ngDevMode) && ɵngcc0.ɵsetClassMetadata(ImageUploaderComponent, [{\n        type: Component,\n        args: [{ selector: 'ngx-image-uploader', template: `<div class=\"image-container\">\r\n  <div class=\"match-parent\" [ngSwitch]=\"status\">\r\n\r\n    <div class=\"match-parent\" *ngSwitchCase=\"statusEnum.NotSelected\">\r\n      <button type=\"button\" class=\"add-image-btn\" (click)=\"onImageClicked()\">\r\n          <div>\r\n            <p class=\"plus\">+</p>\r\n            <p>Click here to add image</p>\r\n            <p>Or drop image here</p>\r\n          </div>\r\n      </button>\r\n    </div>\r\n\r\n    <div class=\"selected-status-wrapper match-parent\" *ngSwitchCase=\"statusEnum.Loaded\">\r\n      <img [src]=\"imageThumbnail\" #imageElement>\r\n\r\n      <button type=\"button\" class=\"remove\" (click)=\"removeImage()\">×</button>\r\n    </div>\r\n\r\n    <div class=\"selected-status-wrapper match-parent\" *ngSwitchCase=\"statusEnum.Selected\">\r\n      <img [src]=\"imageThumbnail\" #imageElement>\r\n\r\n      <button type=\"button\" class=\"remove\" (click)=\"removeImage()\">×</button>\r\n    </div>\r\n\r\n    <div *ngSwitchCase=\"statusEnum.Uploading\">\r\n      <img [attr.src]=\"imageThumbnail ? imageThumbnail : null\" (click)=\"onImageClicked()\">\r\n\r\n      <div class=\"progress-bar\">\r\n        <div class=\"bar\" [style.width]=\"progress+'%'\"></div>\r\n      </div>\r\n    </div>\r\n\r\n    <div class=\"match-parent\" *ngSwitchCase=\"statusEnum.Loading\">\r\n      <div class=\"sk-fading-circle\">\r\n        <div class=\"sk-circle1 sk-circle\"></div>\r\n        <div class=\"sk-circle2 sk-circle\"></div>\r\n        <div class=\"sk-circle3 sk-circle\"></div>\r\n        <div class=\"sk-circle4 sk-circle\"></div>\r\n        <div class=\"sk-circle5 sk-circle\"></div>\r\n        <div class=\"sk-circle6 sk-circle\"></div>\r\n        <div class=\"sk-circle7 sk-circle\"></div>\r\n        <div class=\"sk-circle8 sk-circle\"></div>\r\n        <div class=\"sk-circle9 sk-circle\"></div>\r\n        <div class=\"sk-circle10 sk-circle\"></div>\r\n        <div class=\"sk-circle11 sk-circle\"></div>\r\n        <div class=\"sk-circle12 sk-circle\"></div>\r\n      </div>\r\n    </div>\r\n\r\n    <div class=\"match-parent\" *ngSwitchCase=\"statusEnum.Error\">\r\n      <div class=\"error\">\r\n        <div class=\"error-message\">\r\n          <p>{{errorMessage}}</p>\r\n        </div>\r\n        <button type=\"button\" class=\"remove\" (click)=\"dismissError()\">×</button>\r\n      </div>\r\n    </div>\r\n  </div>\r\n\r\n  <input type=\"file\" #fileInput (change)=\"onFileChanged()\">\r\n  <div class=\"drag-overlay\" [hidden]=\"true\" #dragOverlay></div>\r\n</div>\r\n`, host: {\n                    '[style.width]': 'thumbnailWidth + \"px\"',\n                    '[style.height]': 'thumbnailHeight + \"px\"'\n                }, providers: [\n                    {\n                        provide: NG_VALUE_ACCESSOR,\n                        useExisting: forwardRef(() => ImageUploaderComponent),\n                        multi: true\n                    }\n                ], styles: [\":host{display:block}.match-parent{width:100%;height:100%}.add-image-btn{width:100%;height:100%;font-weight:700;opacity:.5;border:0}.add-image-btn:hover{opacity:.7;cursor:pointer;background-color:#ddd;box-shadow:inset 0 0 5px rgba(0,0,0,.3)}.add-image-btn .plus{font-size:30px;font-weight:400;margin-bottom:5px;margin-top:5px}img{cursor:pointer;position:absolute;top:50%;left:50%;margin-right:-50%;-webkit-transform:translate(-50%,-50%);transform:translate(-50%,-50%);max-width:100%}.image-container{width:100%;height:100%;position:relative;display:inline-block;background-color:#f1f1f1;box-shadow:inset 0 0 5px rgba(0,0,0,.2)}.remove{position:absolute;top:0;right:0;width:40px;height:40px;font-size:25px;text-align:center;opacity:.8;border:0;cursor:pointer}.selected-status-wrapper>.remove:hover{opacity:.7;background-color:#fff}.error .remove{opacity:.5}.error .remove:hover{opacity:.7}input{display:none}.error{width:100%;height:100%;border:1px solid #e3a5a2;color:#d2706b;background-color:#fbf1f0;position:relative;text-align:center;display:flex;align-items:center}.error-message{width:100%;line-height:18px}.progress-bar{position:absolute;bottom:10%;left:10%;width:80%;height:5px;background-color:grey;opacity:.9;overflow:hidden}.bar{position:absolute;height:100%;background-color:#a4c639}.drag-overlay{position:absolute;top:0;left:0;width:100%;height:100%;background-color:#ff0;opacity:.3}.sk-fading-circle{width:40px;height:40px;position:relative;top:50%;left:50%;-webkit-transform:translate(-50%,-50%);transform:translate(-50%,-50%)}.sk-fading-circle .sk-circle{width:100%;height:100%;position:absolute;left:0;top:0}.sk-fading-circle .sk-circle:before{content:'';display:block;margin:0 auto;width:15%;height:15%;background-color:#333;border-radius:100%;-webkit-animation:1.2s ease-in-out infinite both sk-circleFadeDelay;animation:1.2s ease-in-out infinite both sk-circleFadeDelay}.sk-fading-circle .sk-circle2{-webkit-transform:rotate(30deg);transform:rotate(30deg)}.sk-fading-circle .sk-circle3{-webkit-transform:rotate(60deg);transform:rotate(60deg)}.sk-fading-circle .sk-circle4{-webkit-transform:rotate(90deg);transform:rotate(90deg)}.sk-fading-circle .sk-circle5{-webkit-transform:rotate(120deg);transform:rotate(120deg)}.sk-fading-circle .sk-circle6{-webkit-transform:rotate(150deg);transform:rotate(150deg)}.sk-fading-circle .sk-circle7{-webkit-transform:rotate(180deg);transform:rotate(180deg)}.sk-fading-circle .sk-circle8{-webkit-transform:rotate(210deg);transform:rotate(210deg)}.sk-fading-circle .sk-circle9{-webkit-transform:rotate(240deg);transform:rotate(240deg)}.sk-fading-circle .sk-circle10{-webkit-transform:rotate(270deg);transform:rotate(270deg)}.sk-fading-circle .sk-circle11{-webkit-transform:rotate(300deg);transform:rotate(300deg)}.sk-fading-circle .sk-circle12{-webkit-transform:rotate(330deg);transform:rotate(330deg)}.sk-fading-circle .sk-circle2:before{-webkit-animation-delay:-1.1s;animation-delay:-1.1s}.sk-fading-circle .sk-circle3:before{-webkit-animation-delay:-1s;animation-delay:-1s}.sk-fading-circle .sk-circle4:before{-webkit-animation-delay:-.9s;animation-delay:-.9s}.sk-fading-circle .sk-circle5:before{-webkit-animation-delay:-.8s;animation-delay:-.8s}.sk-fading-circle .sk-circle6:before{-webkit-animation-delay:-.7s;animation-delay:-.7s}.sk-fading-circle .sk-circle7:before{-webkit-animation-delay:-.6s;animation-delay:-.6s}.sk-fading-circle .sk-circle8:before{-webkit-animation-delay:-.5s;animation-delay:-.5s}.sk-fading-circle .sk-circle9:before{-webkit-animation-delay:-.4s;animation-delay:-.4s}.sk-fading-circle .sk-circle10:before{-webkit-animation-delay:-.3s;animation-delay:-.3s}.sk-fading-circle .sk-circle11:before{-webkit-animation-delay:-.2s;animation-delay:-.2s}.sk-fading-circle .sk-circle12:before{-webkit-animation-delay:-.1s;animation-delay:-.1s}@-webkit-keyframes sk-circleFadeDelay{0%,100%,39%{opacity:0}40%{opacity:1}}@keyframes sk-circleFadeDelay{0%,100%,39%{opacity:0}40%{opacity:1}}\"] }]\n    }], function () { return [{ type: Renderer }, { type: ImageUploaderService }, { type: ɵngcc0.ChangeDetectorRef }]; }, { upload: [{\n            type: Output\n        }], statusChange: [{\n            type: Output\n        }], \n    /**\n     * @param {?} e\n     * @return {?}\n     */\n    drop: [{\n            type: HostListener,\n            args: ['drop', ['$event']]\n        }], \n    /**\n     * @param {?} e\n     * @return {?}\n     */\n    dragenter: [{\n            type: HostListener,\n            args: ['dragenter', ['$event']]\n        }], \n    /**\n     * @param {?} e\n     * @return {?}\n     */\n    dragover: [{\n            type: HostListener,\n            args: ['dragover', ['$event']]\n        }], \n    /**\n     * @param {?} e\n     * @return {?}\n     */\n    dragleave: [{\n            type: HostListener,\n            args: ['dragleave', ['$event']]\n        }], imageElement: [{\n            type: ViewChild,\n            args: ['imageElement']\n        }], fileInputElement: [{\n            type: ViewChild,\n            args: ['fileInput']\n        }], dragOverlayElement: [{\n            type: ViewChild,\n            args: ['dragOverlay']\n        }], options: [{\n            type: Input\n        }] }); })();\n\n/**\r\n * @fileoverview added by tsickle\r\n * @suppress {checkTypes} checked by tsc\r\n */\r\nclass ImageUploaderModule {\r\n}\nImageUploaderModule.ɵfac = function ImageUploaderModule_Factory(t) { return new (t || ImageUploaderModule)(); };\nImageUploaderModule.ɵmod = /*@__PURE__*/ ɵngcc0.ɵɵdefineNgModule({ type: ImageUploaderModule });\nImageUploaderModule.ɵinj = /*@__PURE__*/ ɵngcc0.ɵɵdefineInjector({ imports: [CommonModule,\n        HttpClientModule] });\n(function () { (typeof ngDevMode === \"undefined\" || ngDevMode) && ɵngcc0.ɵsetClassMetadata(ImageUploaderModule, [{\n        type: NgModule,\n        args: [{\n                imports: [\n                    CommonModule,\n                    HttpClientModule\n                ],\n                declarations: [ImageUploaderComponent],\n                exports: [ImageUploaderComponent]\n            }]\n    }], null, null); })();\n(function () { (typeof ngJitMode === \"undefined\" || ngJitMode) && ɵngcc0.ɵɵsetNgModuleScope(ImageUploaderModule, { declarations: function () { return [ImageUploaderComponent]; }, imports: function () { return [CommonModule,\n        HttpClientModule]; }, exports: function () { return [ImageUploaderComponent]; } }); })();\n\n/**\r\n * @fileoverview added by tsickle\r\n * @suppress {checkTypes} checked by tsc\r\n */\n\n/**\r\n * @fileoverview added by tsickle\r\n * @suppress {checkTypes} checked by tsc\r\n */\n\nexport { ImageUploaderService, Status, ImageUploaderComponent, ImageUploaderModule, FileQueueObject };\n\n"],"mappings":"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"},"metadata":{},"sourceType":"module"}